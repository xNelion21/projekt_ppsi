{"version":3,"file":"BLink.vue_vue_type_script_setup_true_lang-BSwVlDdR.js","sources":["../src/composables/useLinkClasses.ts","../src/components/BLink/BLink.vue","../src/composables/useBLinkHelper.ts","../src/utils/isLink.ts"],"sourcesContent":["import {computed, type MaybeRefOrGetter, toValue} from 'vue'\nimport type {\n  LinkIconProps,\n  LinkOpacityProps,\n  LinkUnderlineProps,\n  LinkVariantProps,\n} from '../types/ComponentProps'\n\nexport const useLinkClasses = (\n  linkProps: MaybeRefOrGetter<\n    LinkUnderlineProps & LinkOpacityProps & LinkIconProps & LinkVariantProps\n  >\n) =>\n  computed(() => {\n    const props = toValue(linkProps)\n    return {\n      [`link-${props.variant}`]: props.variant !== null,\n      [`link-opacity-${props.opacity}`]: props.opacity !== undefined,\n      [`link-opacity-${props.opacityHover}-hover`]: props.opacityHover !== undefined,\n      [`link-underline-${props.underlineVariant}`]: props.underlineVariant !== null,\n      [`link-offset-${props.underlineOffset}`]: props.underlineOffset !== undefined,\n      [`link-offset-${props.underlineOffsetHover}-hover`]: props.underlineOffsetHover !== undefined,\n      ['link-underline']:\n        props.underlineVariant === null &&\n        (props.underlineOpacity !== undefined || props.underlineOpacityHover !== undefined),\n      [`link-underline-opacity-${props.underlineOpacity}`]: props.underlineOpacity !== undefined,\n      [`link-underline-opacity-${props.underlineOpacityHover}-hover`]:\n        props.underlineOpacityHover !== undefined,\n      'icon-link': props.icon === true,\n    }\n  })\n","<template>\n  <component\n    :is=\"tag\"\n    :class=\"computedClasses\"\n    :target=\"props.target\"\n    :href=\"computedHref\"\n    :rel=\"computedRel\"\n    :tabindex=\"computedTabIndex\"\n    :aria-disabled=\"props.disabled ? true : null\"\n    v-bind=\"computedSpecificProps\"\n    @click=\"\n      (e: MouseEvent) => {\n        clicked(e)\n        link?.navigate(e)\n      }\n    \"\n  >\n    <slot />\n  </component>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useLinkClasses} from '../../composables/useLinkClasses'\nimport type {BLinkProps} from '../../types/ComponentProps'\nimport {collapseInjectionKey, navbarInjectionKey} from '../../utils/keys'\nimport {computed, inject, useAttrs} from 'vue'\nimport {useBLinkTagResolver} from '../../composables/useBLinkHelper'\n\nconst defaultActiveClass = 'active'\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst _props = withDefaults(defineProps<BLinkProps>(), {\n  active: undefined,\n  activeClass: 'router-link-active',\n  disabled: false,\n  exactActiveClass: 'router-link-exact-active',\n  href: undefined,\n  icon: false,\n  opacity: undefined,\n  opacityHover: undefined,\n  noPrefetch: undefined,\n  prefetchOn: undefined,\n  noRel: false,\n  prefetchedClass: undefined,\n  prefetch: undefined,\n  rel: undefined,\n  replace: false,\n  routerComponentName: 'router-link',\n  routerTag: 'a',\n  stretched: false,\n  target: undefined,\n  to: undefined,\n  underlineOffset: undefined,\n  underlineOffsetHover: undefined,\n  underlineOpacity: undefined,\n  underlineOpacityHover: undefined,\n  underlineVariant: null,\n  variant: null,\n})\nconst props = useDefaults(_props, 'BLink')\n\nconst emit = defineEmits<{\n  click: [value: MouseEvent]\n}>()\n\nconst attrs = useAttrs()\nconst {computedHref, tag, link, isNuxtLink, isRouterLink, linkProps, isNonStandardTag} =\n  useBLinkTagResolver({\n    routerComponentName: () => props.routerComponentName,\n    disabled: () => props.disabled,\n    to: () => props.to,\n    replace: () => props.replace,\n    href: () => props.href,\n  })\n\nconst collapseData = inject(collapseInjectionKey, null)\nconst navbarData = inject(navbarInjectionKey, null)\n\n/**\n * Not to be confused with computedLinkClasses\n */\nconst linkValueClasses = useLinkClasses(props)\nconst computedClasses = computed(() => [\n  linkValueClasses.value,\n  attrs.class,\n  computedLinkClasses.value,\n  {\n    [defaultActiveClass]: props.active,\n    [props.activeClass]: link.value?.isActive.value || false,\n    [props.exactActiveClass]: link.value?.isExactActive.value || false,\n    'stretched-link': props.stretched === true,\n  },\n])\nconst computedLinkClasses = computed(() => ({\n  [defaultActiveClass]: props.active,\n  disabled: props.disabled,\n}))\n\nconst clicked = (e: Readonly<MouseEvent>): void => {\n  if (props.disabled) {\n    e.preventDefault()\n    e.stopImmediatePropagation()\n    return\n  }\n\n  if (\n    (collapseData?.isNav?.value === true && navbarData === null) ||\n    (navbarData !== null && navbarData.autoClose?.value === true)\n  ) {\n    collapseData?.hide?.()\n  }\n\n  emit('click', e)\n}\n\nconst computedRel = computed(() =>\n  props.target === '_blank' ? (!props.rel && props.noRel ? 'noopener' : props.rel) : undefined\n)\nconst computedTabIndex = computed(() =>\n  props.disabled ? '-1' : typeof attrs.tabindex === 'undefined' ? null : attrs.tabindex\n)\n\nconst nuxtSpecificProps = computed(() => ({\n  prefetch: props.prefetch,\n  noPrefetch: props.noPrefetch,\n  prefetchOn: props.prefetchOn,\n  prefetchedClass: props.prefetchedClass,\n  ...linkProps.value,\n}))\nconst computedSpecificProps = computed(() => ({\n  ...(isRouterLink.value ? linkProps.value : undefined),\n  // In addition to being Nuxt specific, we add these values if it's some non-standard tag. We don't know what it is,\n  // So we just add it anyways. It will be made as an attr if it's unused so it's fine\n  ...(isNuxtLink.value || isNonStandardTag.value ? nuxtSpecificProps.value : undefined),\n}))\n</script>\n","import {\n  computed,\n  getCurrentInstance,\n  type MaybeRefOrGetter,\n  readonly,\n  resolveDynamicComponent,\n  toRef,\n  toValue,\n} from 'vue'\nimport {isLink} from '../utils/isLink'\nimport {pick} from '../utils/object'\nimport type {RouteLocationRaw, RouterLink} from 'vue-router'\nimport {toPascalCase} from '../utils/stringUtils'\n\nexport const useBLinkHelper = <\n  T extends Record<string, unknown>,\n  const B extends ReadonlyArray<PropertyKey>,\n>(\n  props: MaybeRefOrGetter<T>,\n  pickProps?: MaybeRefOrGetter<B | (keyof T)[]>\n) => {\n  const pickPropsResolved = readonly(toRef(pickProps))\n  const resolvedProps = readonly(toRef(props))\n\n  const computedLink = computed(() => isLink(resolvedProps.value))\n  const computedLinkProps = computed(() =>\n    computedLink.value\n      ? pick(\n          resolvedProps.value,\n          pickPropsResolved.value ?? [\n            'active',\n            'activeClass',\n            'append',\n            'href',\n            'rel',\n            'replace',\n            'routerComponentName',\n            'target',\n            'to',\n            'variant',\n            'opacity',\n            'opacityHover',\n            'underlineVariant',\n            'underlineOffset',\n            'underlineOffsetHover',\n            'underlineOpacity',\n            'underlineOpacityHover',\n          ]\n        )\n      : {}\n  )\n\n  return {computedLink, computedLinkProps}\n}\n\nexport const useBLinkTagResolver = ({\n  to,\n  disabled,\n  href,\n  replace,\n  routerComponentName,\n}: {\n  routerComponentName: MaybeRefOrGetter<string>\n  disabled: MaybeRefOrGetter<boolean>\n  to: MaybeRefOrGetter<RouteLocationRaw | undefined>\n  href: MaybeRefOrGetter<string | undefined>\n  replace: MaybeRefOrGetter<boolean>\n}) => {\n  // Getting instance\n  const instance = getCurrentInstance()\n  const router = instance?.appContext?.app?.config?.globalProperties?.$router\n  const route = instance?.appContext?.app?.config?.globalProperties?.$route\n  const RouterLinkComponent = resolveDynamicComponent('RouterLink') as typeof RouterLink | string\n  const useLink =\n    !!RouterLinkComponent &&\n    typeof RouterLinkComponent !== 'string' &&\n    'useLink' in RouterLinkComponent\n      ? RouterLinkComponent.useLink\n      : null\n\n  // Resolving props\n  const resolvedTo = computed(() => toValue(to) || '')\n  const resolvedReplace = readonly(toRef(replace))\n\n  const routerName = computed(() => toPascalCase(toValue(routerComponentName)))\n\n  const tag = computed(() => {\n    const hasRouter = instance?.appContext?.app?.component(routerName.value) !== undefined\n    if (!hasRouter || toValue(disabled) || !resolvedTo.value) {\n      return 'a'\n    }\n    return routerName.value\n  })\n\n  const isRouterLink = computed(() => tag.value === 'RouterLink')\n  const isNuxtLink = computed(\n    // @ts-expect-error we're doing an explicit check for Nuxt, so we can safely ignore this\n    () => isRouterLink.value && typeof instance?.appContext?.app?.$nuxt !== 'undefined'\n  )\n  const isNonStandardTag = computed(\n    () => tag.value !== 'a' && !isRouterLink.value && !isNuxtLink.value\n  )\n  const isOfRouterType = computed(() => isRouterLink.value || isNuxtLink.value)\n  const linkProps = computed(() => ({\n    to: resolvedTo.value,\n    replace: resolvedReplace.value,\n  }))\n\n  const _link = useLink?.({\n    to: resolvedTo,\n    replace: resolvedReplace,\n  })\n  const link = computed(() => (isOfRouterType.value ? _link : null))\n\n  const computedHref = computed(() => {\n    if (link.value?.href.value) return link.value.href.value\n\n    const toFallback = '#'\n    const resolvedHref = toValue(href)\n    if (resolvedHref) return resolvedHref\n\n    if (typeof resolvedTo.value === 'string') return resolvedTo.value || toFallback\n\n    // Stabilize the `to` prop for the callback functions\n    const stableTo = resolvedTo.value\n\n    if (stableTo !== undefined && 'path' in stableTo) {\n      const path = stableTo.path || ''\n      const query = stableTo.query\n        ? `?${Object.keys(stableTo.query)\n            .map((e) => `${e}=${stableTo.query?.[e]}`)\n            .join('=')}`\n        : ''\n      const hash =\n        !stableTo.hash || stableTo.hash.charAt(0) === '#'\n          ? stableTo.hash || ''\n          : `#${stableTo.hash}`\n      return `${path}${query}${hash}` || toFallback\n    }\n    // There is no resolver for `RouteLocationNamedRaw`. Which, I'm not sure there can be one in this context.\n\n    return toFallback\n  })\n\n  return {\n    isNonStandardTag,\n    tag,\n    isRouterLink,\n    isNuxtLink,\n    computedHref,\n    routerName,\n    router,\n    route,\n    link,\n    linkProps,\n  }\n}\n","import type {RouteLocationRaw} from 'vue-router'\n\nexport const isLink = (props: Readonly<{href?: string; to?: RouteLocationRaw}>): boolean =>\n  !!(props.href || props.to)\n"],"names":["useLinkClasses","linkProps","computed","props","toValue","variant","opacity","opacityHover","underlineVariant","underlineOffset","underlineOffsetHover","underlineOpacity","underlineOpacityHover","icon","defaultActiveClass","_props","__props","useDefaults","emit","__emit","attrs","useAttrs","computedHref","tag","link","isNuxtLink","isRouterLink","isNonStandardTag","to","disabled","href","replace","routerComponentName","instance","getCurrentInstance","router","_d","appContext","_a","app","_b","config","_c","globalProperties","$router","route","_h","_e","_f","_g","$route","RouterLinkComponent","resolveDynamicComponent","useLink","resolvedTo","resolvedReplace","readonly","toRef","routerName","toPascalCase","component","value","$nuxt","isOfRouterType","_link","resolvedHref","stableTo","path","query","Object","keys","map","e","join","hash","charAt","useBLinkTagResolver","collapseData","inject","collapseInjectionKey","navbarData","navbarInjectionKey","linkValueClasses","computedClasses","class","computedLinkClasses","active","activeClass","isActive","exactActiveClass","isExactActive","stretched","computedRel","target","rel","noRel","computedTabIndex","tabindex","nuxtSpecificProps","prefetch","noPrefetch","prefetchOn","prefetchedClass","computedSpecificProps","preventDefault","stopImmediatePropagation","isNav","autoClose","hide","call","pickProps","pickPropsResolved","resolvedProps","computedLink","isLink","computedLinkProps","pick"],"mappings":"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"}