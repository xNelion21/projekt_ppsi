"use strict";const e=require("vue"),o=require("./useDefaults-q0yyNSBk.js"),a=require("./useFormInput-DtG80Vyc.js"),t=require("./dom-CoD-aJvn.js"),u=require("./index-BjjsoN-a.js"),l=["id","name","form","value","disabled","placeholder","required","autocomplete","readonly","aria-required","aria-invalid","rows","wrap"],r=e.defineComponent({__name:"BFormTextarea",props:e.mergeModels({noResize:{type:Boolean,default:!1},rows:{default:2},wrap:{default:"soft"},noAutoShrink:{type:Boolean,default:!1},maxRows:{default:void 0},ariaInvalid:{type:[Boolean,String],default:void 0},autocomplete:{default:void 0},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},form:{default:void 0},formatter:{type:Function,default:void 0},id:{default:void 0},lazyFormatter:{type:Boolean,default:!1},list:{default:void 0},name:{default:void 0},placeholder:{default:void 0},plaintext:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},size:{default:void 0},state:{type:[Boolean,null],default:void 0},debounce:{default:0},debounceMaxWait:{default:NaN}},{modelValue:{default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(r,{expose:n}){const d=r,i=o.useDefaults(d,"BFormTextarea"),[s,p]=e.useModel(r,"modelValue",{set:e=>a.normalizeInput(e,p)}),m=e.useTemplateRef("_input"),{computedId:f,forceUpdateKey:v,computedAriaInvalid:c,onInput:h,stateClass:y,onChange:x,onBlur:b,focus:w,blur:B}=a.useFormInput(i,m,s,p),g=e.computed((()=>[y.value,i.plaintext?"form-control-plaintext":"form-control",{[`form-control-${i.size}`]:!!i.size}])),{computedStyles:q,onInput:F,computedRows:I}=((o,{maxRows:a,noAutoShrink:l,rows:r})=>{const n=e.ref(0),d=u.useToNumber(e.computed((()=>e.toValue(a)||NaN)),{method:"parseInt",nanToZero:!0}),i=u.useToNumber(r,{method:"parseInt",nanToZero:!0}),s=e.computed((()=>Math.max(i.value||2,2))),p=e.computed((()=>Math.max(s.value,d.value||0))),m=e.computed((()=>s.value===p.value?s.value:null)),f=async()=>{if(!o.value||!t.isVisible(o.value))return void(n.value=null);const a=getComputedStyle(o.value),u=Number.parseFloat(a.lineHeight)||1,r=(Number.parseFloat(a.borderTopWidth)||0)+(Number.parseFloat(a.borderBottomWidth)||0),d=(Number.parseFloat(a.paddingTop)||0)+(Number.parseFloat(a.paddingBottom)||0),i=r+d,m=u*s.value+i,f=o.value.style.height||a.height;n.value="auto",await e.nextTick();const{scrollHeight:v}=o.value;n.value=f,await e.nextTick();const c=Math.max((v-d)/u,2),h=Math.min(Math.max(c,s.value),p.value),y=Math.max(Math.ceil(h*u+i),m);e.toValue(l)&&(Number.parseFloat(f.toString())||0)>y?n.value=f:n.value=`${y}px`};return e.onMounted(f),{onInput:f,computedStyles:e.computed((()=>({resize:"none",height:"string"==typeof n.value?n.value:n.value?`${n.value}px`:void 0}))),computedRows:m}})(m,{maxRows:()=>i.maxRows,rows:()=>i.rows,noAutoShrink:()=>i.noAutoShrink}),M=e.computed((()=>({resize:i.noResize?"none":void 0,...i.maxRows||i.noAutoShrink?q.value:void 0})));return n({blur:B,element:m,focus:w}),(o,a)=>(e.openBlock(),e.createElementBlock("textarea",{id:e.unref(f),ref:"_input",key:e.unref(v),class:e.normalizeClass(g.value),name:e.unref(i).name||void 0,form:e.unref(i).form||void 0,value:e.unref(s)??void 0,disabled:e.unref(i).disabled,placeholder:e.unref(i).placeholder,required:e.unref(i).required||void 0,autocomplete:e.unref(i).autocomplete||void 0,readonly:e.unref(i).readonly||e.unref(i).plaintext,"aria-required":e.unref(i).required||void 0,"aria-invalid":e.unref(c),rows:e.unref(I)||2,style:e.normalizeStyle(M.value),wrap:e.unref(i).wrap||void 0,onInput:a[0]||(a[0]=o=>{e.unref(h)(o),e.unref(F)()}),onChange:a[1]||(a[1]=(...o)=>e.unref(x)&&e.unref(x)(...o)),onBlur:a[2]||(a[2]=(...o)=>e.unref(b)&&e.unref(b)(...o))},null,46,l))}});exports._sfc_main=r;
//# sourceMappingURL=BFormTextarea.vue_vue_type_script_setup_true_lang-0ZctNV5N.js.map
