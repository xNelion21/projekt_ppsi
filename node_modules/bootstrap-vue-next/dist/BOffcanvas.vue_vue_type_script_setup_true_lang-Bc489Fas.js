"use strict";const e=require("vue"),o=require("./index-DiURjA3G.js"),a=require("./useSafeScrollLock-Xjl1NHrG.js"),l=require("./useDefaults-q0yyNSBk.js"),t=require("./useId-CVpYZavN.js"),r=require("./BButton.vue_vue_type_script_setup_true_lang-DHpIDYI_.js"),s=require("./BCloseButton.vue_vue_type_script_setup_true_lang-DZGcyqBT.js"),n=require("./ConditionalTeleport.vue_vue_type_script_lang-DOGq8bM-.js"),i=require("./dom-CoD-aJvn.js"),d=require("./useShowHide-Bb4cHgbQ.js"),u=require("./getElement-BPs-1fVW.js"),c=["id","aria-labelledby"],f=["id"],p="offcanvas-fallback-focus",v=e.defineComponent({inheritAttrs:!1,__name:"BOffcanvas",props:e.mergeModels({noBackdrop:{type:Boolean,default:!1},backdropFirst:{type:Boolean,default:!1},bodyAttrs:{default:void 0},bodyClass:{default:void 0},bodyScrolling:{type:Boolean,default:!1},focus:{type:[String,Boolean,Object,null],default:void 0},footerClass:{default:void 0},headerClass:{default:void 0},headerCloseClass:{default:void 0},headerCloseLabel:{default:"Close"},headerCloseVariant:{default:"secondary"},id:{default:void 0},noCloseOnBackdrop:{type:Boolean,default:!1},noCloseOnEsc:{type:Boolean,default:!1},noHeader:{type:Boolean,default:!1},noTrap:{type:Boolean,default:!1},noHeaderClose:{type:Boolean,default:!1},placement:{default:"start"},shadow:{type:[String,Boolean],default:!1},title:{default:void 0},responsive:{},width:{default:void 0},teleportDisabled:{type:Boolean,default:!1},teleportTo:{default:"body"},initialAnimation:{type:Boolean,default:!1},noAnimation:{type:Boolean,default:!1},noFade:{type:Boolean},lazy:{type:Boolean,default:!1},unmountLazy:{type:Boolean,default:!1},show:{type:Boolean,default:!1},transProps:{},visible:{type:Boolean,default:!1}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:e.mergeModels(["close","esc","backdrop","breakpoint","hide","hide-prevented","hidden","show","show-prevented","shown","toggle","toggle-prevented","cancel","ok"],["update:modelValue"]),setup(v,{expose:m,emit:k}){const b=v,h=l.useDefaults(b,"BOffcanvas"),y=k,B=e.useSlots(),C=e.useModel(v,"modelValue"),g=t.useId((()=>h.id),"offcanvas"),_=e.useTemplateRef("_element"),w=e.useTemplateRef("_fallbackFocusElement"),S=e.useTemplateRef("_close"),P=()=>h.focus&&"boolean"!=typeof h.focus?"close"===h.focus?S:u.getElement(h.focus,_.value??void 0):_,{showRef:E,renderRef:V,renderBackdropRef:T,hide:F,show:A,toggle:N,computedNoAnimation:q,contentShowing:x,transitionProps:z,backdropReady:R,backdropTransitionProps:$,backdropVisible:j,isVisible:D,buildTriggerableEvent:O,localNoAnimation:H,isLeaving:L,trapActive:M}=d.useShowHide(C,h,y,_,g,{transitionProps:{onAfterEnter:()=>{e.nextTick((()=>{if(!1!==h.focus&&!K.value&&h.noTrap){const e=o.unrefElement(P());null==e||e.focus()}}))},enterToClass:"showing",leaveToClass:"hiding",enterActiveClass:"",leaveActiveClass:"",enterFromClass:"",leaveFromClass:""}}),I=o.useBreakpoints(o.breakpointsBootstrapV5).smallerOrEqual((()=>h.responsive??"xs")),K=e.ref(void 0!==h.responsive&&!I.value);e.onMounted((()=>{void 0!==h.responsive&&y("breakpoint",O("breakpoint"),K.value)})),a.useSafeScrollLock(E,(()=>h.bodyScrolling||K.value)),o.onKeyStroke("Escape",(()=>{F("esc")}),{target:_});const{needsFallback:X}=a.useActivatedFocusTrap({element:_,isActive:M,noTrap:()=>h.noTrap||K.value,fallbackFocus:{classSelector:p,ref:w},focus:()=>!1!==h.focus&&!K.value&&(o.unrefElement(P())??void 0)}),Y=e.computed((()=>(void 0===h.responsive||!K.value)&&!1===h.noBackdrop&&(!0===E.value||L.value&&h.backdropFirst&&!q.value))),Z=e.computed((()=>!i.isEmptySlot(B["header-close"]))),G=e.computed((()=>[{"text-reset":!Z.value},h.headerCloseClass])),J=e.computed((()=>({variant:Z.value?h.headerCloseVariant:void 0,class:G.value}))),Q=e.computed((()=>!i.isEmptySlot(B.footer))),U=e.computed((()=>[void 0===h.responsive?"offcanvas":`offcanvas-${h.responsive}`,`offcanvas-${h.placement}`,{show:D.value,[`shadow-${h.shadow}`]:!!h.shadow,"no-transition":q.value}])),W=e.computed((()=>({width:h.width}))),ee=e.computed((()=>({visible:D.value,placement:h.placement,hide:F,show:A,toggle:N,id:g.value,active:M.value})));return e.watch(I,(e=>{if(void 0!==h.responsive)if(!0===e){const e=!1;H.value=!0,requestAnimationFrame((()=>{K.value=e})),y("breakpoint",O("breakpoint"),e),y("hide",O("hide"))}else{const e=!0;H.value=!0,requestAnimationFrame((()=>{K.value=e})),y("breakpoint",O("breakpoint"),e),y("show",O("show"))}})),m({hide:F,show:A,toggle:N,isOpenByBreakpoint:K}),(o,a)=>(e.openBlock(),e.createBlock(n._sfc_main,{to:e.unref(h).teleportTo,disabled:e.unref(h).teleportDisabled||K.value},{default:e.withCtx((()=>[e.unref(V)||e.unref(x)||K.value?(e.openBlock(),e.createBlock(e.Transition,e.mergeProps({key:0},e.unref(z),{appear:C.value||e.unref(h).visible}),{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("div",e.mergeProps({id:e.unref(g),ref:"_element","aria-modal":"true",role:"dialog",class:U.value,style:W.value,tabindex:"-1","aria-labelledby":`${e.unref(g)}-offcanvas-label`,"data-bs-backdrop":"false"},o.$attrs),[e.unref(x)||K.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(h).noHeader?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["offcanvas-header",e.unref(h).headerClass])},[e.renderSlot(o.$slots,"header",e.normalizeProps(e.guardReactiveProps(ee.value)),(()=>[e.createElementVNode("h5",{id:`${e.unref(g)}-offcanvas-label`,class:"offcanvas-title"},[e.renderSlot(o.$slots,"title",e.normalizeProps(e.guardReactiveProps(ee.value)),(()=>[e.createTextVNode(e.toDisplayString(e.unref(h).title),1)]))],8,f),e.unref(h).noHeaderClose?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[Z.value?(e.openBlock(),e.createBlock(r._sfc_main,e.mergeProps({key:0,ref:"_close"},J.value,{onClick:a[0]||(a[0]=o=>e.unref(F)("close"))}),{default:e.withCtx((()=>[e.renderSlot(o.$slots,"header-close",e.normalizeProps(e.guardReactiveProps(ee.value)))])),_:3},16)):(e.openBlock(),e.createBlock(s._sfc_main,e.mergeProps({key:1,ref:"_close","aria-label":e.unref(h).headerCloseLabel},J.value,{onClick:a[1]||(a[1]=o=>e.unref(F)("close"))}),null,16,["aria-label"]))],64))]))],2)),e.createElementVNode("div",e.mergeProps({class:["offcanvas-body",e.unref(h).bodyClass]},e.unref(h).bodyAttrs),[e.renderSlot(o.$slots,"default",e.normalizeProps(e.guardReactiveProps(ee.value)))],16),Q.value?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(e.unref(h).footerClass)},[e.renderSlot(o.$slots,"footer",e.normalizeProps(e.guardReactiveProps(ee.value)))],2)):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),e.unref(X)?(e.openBlock(),e.createElementBlock("div",{key:1,ref:"_fallbackFocusElement",class:e.normalizeClass(p),tabindex:"0",style:{width:"0",height:"0",overflow:"hidden"}},null,512)):e.createCommentVNode("",!0)],16,c),[[e.vShow,e.unref(E)&&(e.unref(R)&&e.unref(h).backdropFirst||!e.unref(h).backdropFirst)||K.value]])])),_:3},16,["appear"])):e.createCommentVNode("",!0),e.unref(h).noBackdrop?e.createCommentVNode("",!0):e.renderSlot(o.$slots,"backdrop",e.normalizeProps(e.mergeProps({key:1},ee.value)),(()=>[e.unref(T)?(e.openBlock(),e.createBlock(e.Transition,e.normalizeProps(e.mergeProps({key:0},e.unref($))),{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["offcanvas-backdrop",{fade:!e.unref(q),show:e.unref(j)||e.unref(q)}]),onClick:a[2]||(a[2]=o=>e.unref(F)("backdrop"))},null,2),[[e.vShow,Y.value]])])),_:1},16)):e.createCommentVNode("",!0)]))])),_:3},8,["to","disabled"]))}});exports._sfc_main=v;
//# sourceMappingURL=BOffcanvas.vue_vue_type_script_setup_true_lang-Bc489Fas.js.map
