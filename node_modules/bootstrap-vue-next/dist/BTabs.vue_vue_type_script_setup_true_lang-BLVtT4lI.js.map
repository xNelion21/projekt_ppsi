{"version":3,"file":"BTabs.vue_vue_type_script_setup_true_lang-BLVtT4lI.js","sources":["../src/components/BTabs/BTab.vue","../src/utils/flattenFragments.ts","../src/components/BTabs/BTabs.vue"],"sourcesContent":["<template>\n  <component\n    :is=\"props.tag\"\n    :id=\"computedId\"\n    ref=\"_el\"\n    class=\"tab-pane\"\n    :class=\"computedClasses\"\n    role=\"tabpanel\"\n    :aria-labelledby=\"computedButtonId\"\n    v-bind=\"processedAttrs\"\n  >\n    <slot v-if=\"showSlot\" />\n  </component>\n</template>\n\n<script setup lang=\"ts\">\nimport {computed, inject, onMounted, onUnmounted, ref, useAttrs, useTemplateRef, watch} from 'vue'\nimport {useId} from '../../composables/useId'\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {TabType} from '../../types/Tab'\nimport type {BTabProps} from '../../types/ComponentProps'\nimport {tabsInjectionKey} from '../../utils/keys'\n\nconst _props = withDefaults(defineProps<Omit<BTabProps, 'active'>>(), {\n  buttonId: undefined,\n  disabled: false,\n  id: undefined,\n  lazy: undefined,\n  lazyOnce: undefined,\n  noBody: false,\n  tag: 'div',\n  title: undefined,\n  titleItemClass: undefined,\n  titleLinkAttrs: undefined,\n  titleLinkClass: undefined,\n})\nconst props = useDefaults(_props, 'BTab')\n\nconst slots = defineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  title?: (props: Record<string, never>) => any\n}>()\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst activeModel = defineModel<Exclude<BTabProps['active'], undefined>>('active', {\n  default: false,\n})\n\nconst parentData = inject(tabsInjectionKey, null)\nconst computedId = useId(() => props.id, 'tabpane')\nconst computedButtonId = useId(() => props.buttonId, 'tab')\n\nconst lazyRenderCompleted = ref(false)\nconst el = useTemplateRef<HTMLElement>('_el')\n\nconst attrs = useAttrs()\nconst processedAttrs = computed(() => {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const {onClick: _, ...tabAttrs} = attrs\n  return tabAttrs\n})\n\nconst tab = computed(\n  () =>\n    ({\n      id: computedId.value,\n      buttonId: computedButtonId.value,\n      disabled: props.disabled,\n      title: props.title,\n      titleComponent: slots.title,\n      titleItemClass: () => props.titleItemClass,\n      titleLinkAttrs: () => props.titleLinkAttrs,\n      titleLinkClass: () => props.titleLinkClass,\n      onClick: () => attrs.onClick,\n      el: el.value,\n    }) as TabType\n)\n\nif (parentData) {\n  parentData.registerTab(tab)\n  if (activeModel.value) {\n    parentData.activateTab(computedId.value)\n  }\n}\n\nonMounted(() => {\n  if (!parentData) return\n  parentData.sortTabs()\n})\n\nonUnmounted(() => {\n  if (!parentData) return\n  parentData.unregisterTab(computedId.value)\n})\n\nconst isActive = computed(() => parentData?.activeId.value === computedId.value)\nconst show = ref(isActive.value)\n\nconst computedLazy = computed(() => !!(parentData?.lazy.value || (props.lazyOnce ?? props.lazy)))\nconst computedLazyOnce = computed(() => props.lazyOnce !== undefined)\n\nconst computedActive = computed(() => isActive.value && !props.disabled)\nconst showSlot = computed(\n  () =>\n    computedActive.value ||\n    !computedLazy.value ||\n    (computedLazy.value && computedLazyOnce.value && lazyRenderCompleted.value)\n)\n\nwatch(isActive, (active) => {\n  if (active) {\n    activeModel.value = true\n    setTimeout(() => {\n      show.value = true\n    }, 0)\n    return\n  }\n  show.value = false\n  activeModel.value = false\n})\nwatch(activeModel, (active) => {\n  if (!parentData) return\n  if (!active) {\n    if (isActive.value) {\n      parentData.activateTab(undefined)\n    }\n    return\n  }\n  parentData.activateTab(computedId.value)\n})\n\nconst computedClasses = computed(() => [\n  {\n    'active': isActive.value,\n    'show': show.value,\n    'card-body': parentData?.card.value && props.noBody === false,\n    'fade': !parentData?.noFade.value,\n  },\n  show.value ? parentData?.activeTabClass.value : parentData?.inactiveTabClass.value,\n  parentData?.tabClass.value,\n])\n\nwatch(showSlot, (shown) => {\n  if (shown && !lazyRenderCompleted.value) lazyRenderCompleted.value = true\n})\n</script>\n","import {Fragment, type VNode} from 'vue'\n\nexport function flattenFragments(nodes: VNode[]): VNode[] {\n  return nodes\n    .map((node) => {\n      if (node.type === Fragment) {\n        return flattenFragments(node.children as VNode[])\n      }\n      return node\n    })\n    .flat()\n}\n","<template>\n  <component :is=\"props.tag\" :id=\"props.id\" class=\"tabs\" :class=\"computedClasses\">\n    <ReusableEmptyTab.define>\n      <div class=\"tab-content\" :class=\"props.contentClass\">\n        <slot />\n        <div\n          v-if=\"showEmpty\"\n          key=\"bv-empty-tab\"\n          class=\"tab-pane active\"\n          :class=\"{'card-body': props.card}\"\n        >\n          <slot name=\"empty\" />\n        </div>\n      </div>\n    </ReusableEmptyTab.define>\n\n    <ReusableEmptyTab.reuse v-if=\"props.end\" />\n    <div\n      :class=\"[\n        props.navWrapperClass,\n        {'card-header': props.card, 'ms-auto': vertical && props.end},\n      ]\"\n    >\n      <ul\n        class=\"nav\"\n        :class=\"[navTabsClasses, props.navClass]\"\n        role=\"tablist\"\n        :aria-orientation=\"props.vertical ? 'vertical' : 'horizontal'\"\n      >\n        <slot name=\"tabs-start\" />\n        <li\n          v-for=\"(tab, idx) in tabs\"\n          :key=\"tab.id\"\n          class=\"nav-item\"\n          :class=\"tab.titleItemClass?.()\"\n          role=\"presentation\"\n        >\n          <button\n            :id=\"tab.buttonId\"\n            class=\"nav-link\"\n            :class=\"[tab.navItemClasses, tab.titleLinkClass?.()]\"\n            role=\"tab\"\n            :aria-controls=\"tab.id\"\n            :aria-selected=\"tab.active\"\n            :tabindex=\"props.noKeyNav ? undefined : tab.active ? undefined : -1\"\n            v-bind=\"tab.titleLinkAttrs?.()\"\n            @keydown.left.exact=\"!props.vertical && keynav($event, -1)\"\n            @keydown.left.shift=\"!props.vertical && keynav($event, -999)\"\n            @keydown.up.exact=\"props.vertical && keynav($event, -1)\"\n            @keydown.up.shift=\"props.vertical && keynav($event, -999)\"\n            @keydown.right.exact=\"!props.vertical && keynav($event, 1)\"\n            @keydown.right.shift=\"!props.vertical && keynav($event, 999)\"\n            @keydown.down.exact=\"props.vertical && keynav($event, 1)\"\n            @keydown.down.shift=\"props.vertical && keynav($event, 999)\"\n            @keydown.page-up=\"keynav($event, -999)\"\n            @keydown.page-down=\"keynav($event, 999)\"\n            @keydown.home=\"keynav($event, -999)\"\n            @keydown.end=\"keynav($event, 999)\"\n            @click.stop.prevent=\"(e) => handleClick(e, idx)\"\n          >\n            <component :is=\"tab.titleComponent\" v-if=\"tab.titleComponent\" />\n            <template v-else>\n              {{ tab.title }}\n            </template>\n          </button>\n        </li>\n        <slot name=\"tabs-end\" />\n      </ul>\n    </div>\n    <ReusableEmptyTab.reuse v-if=\"!props.end\" />\n  </component>\n</template>\n\n<script setup lang=\"ts\">\nimport {computed, nextTick, provide, type Ref, ref, toRef, unref, watch} from 'vue'\nimport {BvEvent} from '../../utils/classes'\nimport {useAlignment} from '../../composables/useAlignment'\nimport {createReusableTemplate} from '@vueuse/core'\nimport type {TabType} from '../../types/Tab'\nimport type {BTabsProps} from '../../types/ComponentProps'\nimport {tabsInjectionKey} from '../../utils/keys'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {sortSlotElementsByPosition} from '../../utils/dom'\nimport {flattenFragments} from '../../utils/flattenFragments'\nimport BTab from './BTab.vue'\n\nconst _props = withDefaults(defineProps<Omit<BTabsProps, 'modelValue' | 'activeId'>>(), {\n  activeNavItemClass: undefined,\n  activeTabClass: undefined,\n  align: undefined,\n  card: false,\n  contentClass: undefined,\n  end: false,\n  fill: false,\n  id: undefined,\n  inactiveNavItemClass: undefined,\n  inactiveTabClass: undefined,\n  justified: false,\n  lazy: false,\n  navClass: undefined,\n  navItemClass: undefined,\n  navWrapperClass: undefined,\n  noFade: false,\n  noKeyNav: false,\n  noNavStyle: false,\n  pills: false,\n  small: false,\n  tag: 'div',\n  tabClass: undefined,\n  underline: false,\n  vertical: false,\n})\nconst props = useDefaults(_props, 'BTabs')\n\nconst emit = defineEmits<{\n  'activate-tab': [v1: number, v2: number, v3: BvEvent]\n  'click': [] // TODO click event is never used\n}>()\n\nconst slots = defineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'default'?: (props: Record<string, never>) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'empty'?: (props: Record<string, never>) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'tabs-end'?: (props: Record<string, never>) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'tabs-start'?: (props: Record<string, never>) => any\n}>()\n\nconst modelValue = defineModel<Exclude<BTabsProps['modelValue'], undefined>>({\n  default: -1,\n})\nconst activeId = defineModel<BTabsProps['activeId']>('activeId', {\n  default: undefined,\n})\n\nconst ReusableEmptyTab = createReusableTemplate()\n\nconst tabsInternal = ref<Ref<TabType>[]>([])\n\nconst tabs = computed(() => {\n  const tabElements = flattenFragments(slots.default?.({}) ?? [])\n  const tabElementsArray = (Array.isArray(tabElements) ? tabElements : [tabElements]).filter(\n    (tab) => tab.type === BTab\n  )\n  if (tabsInternal.value.length === 0) {\n    // fail back on the slot elements, the children haven't been registered yet\n    const activeIndex = tabElementsArray.findIndex(\n      (tab) =>\n        (tab.props?.active !== undefined &&\n          (tab.props.disabled === false || tab.props.disabled === undefined)) ||\n        (activeId.value && tab.props?.id === activeId.value)\n    )\n    return tabElementsArray.map((tab, index) => {\n      const active = activeIndex !== -1 ? index === activeIndex : index === 0\n      return {\n        id: tab.props?.id,\n        buttonId: tab.props?.buttonId,\n        disabled: tab.props?.disabled,\n        title: tab.props?.title,\n        titleComponent: (tab.children as {title: unknown})?.title,\n        titleItemClass: () => tab.props?.titleItemClass,\n        titleLinkAttrs: () => tab.props?.titleLinkAttrs,\n        titleLinkClass: () => tab.props?.titleLinkClass,\n        onClick: tab.props?.onClick,\n        active,\n        navItemClasses: [\n          {\n            active,\n            disabled: !(tab.props?.disabled === false || tab.props?.disabled === undefined),\n          },\n          active ? props.activeNavItemClass : props.inactiveNavItemClass,\n          props.navItemClass,\n        ],\n      }\n    })\n  }\n  return tabsInternal.value.map((_tab) => {\n    const tab = unref(_tab)\n    const active = tab.id === activeId.value\n\n    return {\n      ...tab,\n      active,\n      navItemClasses: [\n        {\n          active,\n          disabled: tab.disabled,\n        },\n        active ? props.activeNavItemClass : props.inactiveNavItemClass,\n        props.navItemClass,\n      ],\n    }\n  })\n})\n\nconst showEmpty = computed(() => !(tabs?.value && tabs.value.length > 0))\n\nconst computedClasses = computed(() => ({\n  'd-flex': props.vertical,\n  'align-items-start': props.vertical,\n}))\n\nconst alignment = useAlignment(() => props.align)\n\nconst navTabsClasses = computed(() => ({\n  'nav-pills': props.pills,\n  'nav-underline': props.underline,\n  'flex-column me-3': props.vertical,\n  [alignment.value]: props.align !== undefined,\n  'nav-fill': props.fill,\n  'card-header-tabs': props.card && !props.pills && !props.underline,\n  'card-header-pills': props.card && props.pills,\n  'nav-justified': props.justified,\n  'nav-tabs': !props.noNavStyle && !props.pills && !props.underline,\n  'small': props.small,\n}))\n\nconst activateTab = (index: number): void => {\n  if (index !== undefined) {\n    const id = tabs.value[index]?.id\n    if (\n      index > -1 &&\n      index < tabs.value.length &&\n      !tabs.value[index].disabled &&\n      (modelValue.value < 0 || activeId.value !== id || modelValue.value !== index)\n    ) {\n      const tabEvent = new BvEvent('activate-tab', {cancelable: true})\n      emit('activate-tab', index, modelValue.value, tabEvent)\n      if (!tabEvent.defaultPrevented) {\n        if (activeId.value !== id) activeId.value = id\n        if (modelValue.value !== index) modelValue.value = index\n      }\n    }\n  }\n}\n\nconst handleClick = (event: Readonly<MouseEvent>, index: number) => {\n  activateTab(index)\n  if (\n    index >= 0 &&\n    !tabs.value[index].disabled &&\n    tabs.value[index]?.onClick &&\n    typeof tabs.value[index].onClick === 'function' &&\n    typeof tabs.value[index].onClick() === 'function'\n  ) {\n    tabs.value[index].onClick?.()(event)\n  }\n}\n\nconst keynav = (e: Event, direction: number) => {\n  if (tabs.value.length <= 0 || props.noKeyNav) return\n  e.preventDefault()\n  e.stopPropagation()\n  modelValue.value = nextIndex(modelValue.value + direction, direction)\n  document.getElementById(tabs.value[modelValue.value]?.buttonId)?.focus()\n}\n\nconst nextIndex = (start: number, direction: number) => {\n  let index = start\n  let minIdx = -1\n  let maxIdx = -1\n\n  for (let i = 0; i < tabs.value.length; i++) {\n    if (!tabs.value[i].disabled) {\n      if (minIdx === -1) minIdx = i\n      maxIdx = i\n    }\n  }\n\n  while (index >= minIdx && index <= maxIdx && tabs.value[index].disabled) {\n    index += direction\n  }\n\n  if (index < minIdx) index = minIdx\n  if (index > maxIdx) index = maxIdx\n\n  return index\n}\n\nwatch(modelValue, (newValue, oldValue) => {\n  if (newValue === oldValue) return\n  if (tabs.value.length <= 0) {\n    return\n  }\n\n  const index = nextIndex(newValue, newValue > oldValue ? 1 : -1)\n  nextTick(() => {\n    activateTab(index)\n  })\n})\n\nwatch(activeId, (newValue, oldValue) => {\n  const index = tabs.value.findIndex((t) => t.id === newValue)\n  if (newValue === oldValue) return\n  if (tabs.value.length <= 0) {\n    return\n  }\n  if (index === -1) {\n    activateTab(nextIndex(0, 1))\n    return\n  }\n  activateTab(index)\n})\n\nconst registerTab = (tab: Ref<TabType>) => {\n  if (!tabsInternal.value.find((t) => t.value.id === tab.value.id)) {\n    tabsInternal.value.push(tab)\n  } else {\n    tabsInternal.value[tabsInternal.value.findIndex((t) => t.value.id === tab.value.id)] = tab\n  }\n  tabsInternal.value.sort((a, b) => sortSlotElementsByPosition(a.value.el, b.value.el))\n  findActive()\n}\n\nconst sortTabs = () => {\n  tabsInternal.value.sort((a, b) => sortSlotElementsByPosition(a.value.el, b.value.el))\n  findActive()\n}\n\nconst unregisterTab = (id: string) => {\n  tabsInternal.value = tabsInternal.value.filter((t) => t.value.id !== id)\n}\n\nwatch(\n  tabsInternal,\n  () => {\n    findActive()\n  },\n  {deep: true}\n)\n\nconst findActive = () => {\n  if (tabs.value.length === 0) {\n    modelValue.value = -1\n    activeId.value = undefined\n    return\n  }\n  if (modelValue.value >= 0 && !activeId.value) {\n    activeId.value = tabs.value[modelValue.value]?.id\n  }\n  if (tabs.value.find((t) => t.id === activeId.value)) {\n    activateTab(tabs.value.findIndex((t) => t.id === activeId.value))\n    return\n  }\n  activateTab(tabs.value.map((tab) => !tab.disabled).indexOf(true))\n}\n\nprovide(tabsInjectionKey, {\n  lazy: toRef(() => props.lazy),\n  card: toRef(() => props.card),\n  noFade: toRef(() => props.noFade),\n  activeTabClass: toRef(() => props.activeTabClass),\n  inactiveTabClass: toRef(() => props.inactiveTabClass),\n  tabClass: toRef(() => props.tabClass),\n  registerTab,\n  unregisterTab,\n  activeId,\n  activateTab: (id) => {\n    const idx = tabs.value.findIndex((t) => t.id === id)\n    if (id === undefined || idx === -1) {\n      activateTab(nextIndex(0, 1))\n      return\n    }\n    activateTab(idx)\n  },\n  sortTabs,\n})\n</script>\n"],"names":["_props","__props","props","useDefaults","slots","_useSlots","activeModel","_useModel","parentData","inject","tabsInjectionKey","computedId","useId","id","computedButtonId","buttonId","lazyRenderCompleted","ref","el","useTemplateRef","attrs","useAttrs","processedAttrs","computed","onClick","_","tabAttrs","tab","value","disabled","title","titleComponent","titleItemClass","titleLinkAttrs","titleLinkClass","registerTab","activateTab","onMounted","sortTabs","onUnmounted","unregisterTab","isActive","activeId","show","computedLazy","lazy","lazyOnce","computedLazyOnce","computedActive","showSlot","active","setTimeout","computedClasses","card","noBody","fade","noFade","activeTabClass","inactiveTabClass","tabClass","shown","flattenFragments","nodes","map","node","type","Fragment","children","flat","emit","__emit","modelValue","ReusableEmptyTab","createReusableTemplate","tabsInternal","tabs","tabElements","_a","default","tabElementsArray","Array","isArray","filter","BTab","length","activeIndex","findIndex","_b","index","_c","_d","_e","_f","navItemClasses","_g","_h","activeNavItemClass","inactiveNavItemClass","navItemClass","_tab","unref","showEmpty","vertical","alignment","useAlignment","align","navTabsClasses","pills","underline","fill","justified","noNavStyle","small","tabEvent","BvEvent","cancelable","defaultPrevented","keynav","e","direction","noKeyNav","preventDefault","stopPropagation","nextIndex","document","getElementById","focus","start","minIdx","maxIdx","i","watch","newValue","oldValue","nextTick","t","vue","findActive","deep","find","indexOf","provide","toRef","push","sort","a","b","sortSlotElementsByPosition","idx","event","call"],"mappings":"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"}