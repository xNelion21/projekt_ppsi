"use strict";const e=require("vue"),l=require("./keys-W3DrYQSP.js"),a=require("./useId-CVpYZavN.js"),u=require("./useDefaults-q0yyNSBk.js"),o=require("./flattenFragments-BAK-0GN6.js"),t=require("./BCollapse.vue_vue_type_script_setup_true_lang-CpsI5J6s.js"),r=require("./dom-CoD-aJvn.js"),n=["aria-expanded","aria-controls","onClick"],i=e.defineComponent({inheritAttrs:!1,__name:"BAccordionItem",props:e.mergeModels({bodyAttrs:{default:void 0},bodyClass:{default:void 0},buttonAttrs:{default:void 0},buttonClass:{default:void 0},collapseClass:{default:void 0},headerAttrs:{default:void 0},headerClass:{default:void 0},headerTag:{default:"h2"},horizontal:{type:Boolean,default:void 0},id:{default:void 0},isNav:{type:Boolean,default:void 0},lazy:{type:Boolean,default:!1},unmountLazy:{type:Boolean,default:!1},tag:{default:void 0},title:{default:void 0},show:{type:Boolean,default:void 0},visible:{type:Boolean,default:!1},wrapperAttrs:{default:void 0}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:e.mergeModels(["hide","hide-prevented","hidden","show","show-prevented","shown","toggle","toggle-prevented","cancel","ok"],["update:modelValue"]),setup(o,{emit:r}){const i=e.useAttrs(),d=e.computed((()=>{const{class:e,...l}=i;return{wrapperClass:e,collapseAttrs:l}})),v=o,s=u.useDefaults(v,"BAccordionItem"),c=r,f=e.inject(l.accordionInjectionKey,null),p=a.useId((()=>s.id),"accordion_item"),m=e.useModel(o,"modelValue");m.value?null==f||f.setOpenItem(p.value):m.value=(Array.isArray(null==f?void 0:f.openItem.value)?null==f?void 0:f.openItem.value.includes(p.value):(null==f?void 0:f.openItem.value)===p.value)&&!(null==f?void 0:f.initialAnimation.value);const y=e.useTemplateRef("_el");null==f||f.registerAccordionItem(p.value,y),e.onUnmounted((()=>{null==f||f.unregisterAccordionItem(p.value)})),e.onMounted((()=>{m.value||(null==f?void 0:f.openItem.value)!==p.value||e.nextTick((()=>{m.value=!0}))}));const A=e.computed((()=>Array.isArray(null==f?void 0:f.openItem.value)?null==f?void 0:f.openItem.value.includes(p.value):(null==f?void 0:f.openItem.value)===p.value));return e.watch((()=>null==f?void 0:f.openItem.value),(()=>m.value=A.value)),e.watch(m,(()=>{m.value&&!A.value?null==f||f.setOpenItem(p.value):!m.value&&A.value&&(null==f||f.setCloseItem(p.value))})),(l,a)=>{var u,o;return e.openBlock(),e.createElementBlock("div",e.mergeProps({ref:"_el",class:"accordion-item"},e.unref(s).wrapperAttrs,{class:d.value.wrapperClass}),[e.createVNode(t._sfc_main,e.mergeProps({id:e.unref(p),modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),class:["accordion-collapse",e.unref(s).collapseClass],"aria-labelledby":`${e.unref(p)}-heading`},d.value.collapseAttrs,{tag:e.unref(s).tag,show:e.unref(s).show,horizontal:e.unref(s).horizontal,visible:e.unref(s).visible,"is-nav":e.unref(s).isNav,lazy:e.unref(s).lazy||(null==(u=e.unref(f))?void 0:u.lazy.value),"unmount-lazy":e.unref(s).unmountLazy||(null==(o=e.unref(f))?void 0:o.unmountLazy.value),onShow:a[1]||(a[1]=e=>c("show",e)),onShown:a[2]||(a[2]=e=>c("shown",e)),onHide:a[3]||(a[3]=e=>c("hide",e)),onHidden:a[4]||(a[4]=e=>c("hidden",e)),onHidePrevented:a[5]||(a[5]=e=>c("hide-prevented",e)),onShowPrevented:a[6]||(a[6]=e=>c("show-prevented",e)),onTogglePrevented:a[7]||(a[7]=e=>c("toggle-prevented",e)),onToggle:a[8]||(a[8]=e=>c("toggle",e))}),{header:e.withCtx((({visible:a,toggle:u})=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(s).headerTag),e.mergeProps({id:`${e.unref(p)}-heading`,class:["accordion-header",e.unref(s).headerClass]},e.unref(s).headerAttrs),{default:e.withCtx((()=>[e.createElementVNode("button",e.mergeProps({class:"accordion-button"},e.unref(s).buttonAttrs,{class:[{collapsed:!a},e.unref(s).buttonClass],type:"button","aria-expanded":a?"true":"false","aria-controls":e.unref(p),onClick:u}),[e.renderSlot(l.$slots,"title",{},(()=>[e.createTextVNode(e.toDisplayString(e.unref(s).title),1)]))],16,n)])),_:2},1040,["id","class"]))])),default:e.withCtx((()=>[e.createElementVNode("div",e.mergeProps({class:"accordion-body"},e.unref(s).bodyAttrs,{class:e.unref(s).bodyClass}),[e.renderSlot(l.$slots,"default")],16)])),_:3},16,["id","modelValue","class","aria-labelledby","tag","show","horizontal","visible","is-nav","lazy","unmount-lazy"])],16)}}}),d=["id"],v=e.defineComponent({__name:"BAccordion",props:e.mergeModels({flush:{type:Boolean,default:!1},free:{type:Boolean,default:!1},id:{default:void 0},initialAnimation:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},unmountLazy:{type:Boolean,default:!1}},{modelValue:{default:void 0},modelModifiers:{},index:{default:void 0},indexModifiers:{}}),emits:["update:modelValue","update:index"],setup(t){const n=t,v=e.useSlots(),s=u.useDefaults(n,"BAccordion"),c=e.useModel(t,"modelValue"),f=e.useModel(t,"index"),p=e.ref([]),m=()=>{var e;const l=o.flattenFragments((null==(e=v.default)?void 0:e.call(v,{}))??[]);p.value=(Array.isArray(l)?l:[l]).filter((e=>e.type===i))};m(),e.watch((()=>{var e;return null==(e=v.default)?void 0:e.call(v,{})}),(()=>{m(),e.nextTick((()=>{A()}))}));const y=e.shallowRef([]),A=()=>{var l;if(y.value=y.value.sort(((l,a)=>r.sortSlotElementsByPosition(e.unref(l.el),e.unref(a.el)))),c.value)if(Array.isArray(c.value)){const e=c.value.map((e=>y.value.findIndex((l=>l.id===e)))).filter((e=>-1!==e));e.length,c.value.length,f.value=e}else{const e=y.value.findIndex((e=>e.id===c.value));-1!==e&&(f.value=e)}else void 0!==f.value&&(c.value=Array.isArray(f.value)?f.value.map((e=>{var l;return null==(l=y.value[e])?void 0:l.id})):null==(l=y.value[f.value])?void 0:l.id)},h=a.useId((()=>s.id),"accordion"),g=e.computed((()=>({"accordion-flush":s.flush}))),I=(e,l)=>Array.isArray(e)&&Array.isArray(l)?e.length===l.length&&e.every(((e,a)=>e===l[a])):e===l;return e.watch((()=>f.value),((l,a)=>{var u,o,t,r,n;if(!I(l,a))if(void 0!==f.value)if(s.free)if(Array.isArray(f.value)){const e=f.value.map((e=>{var l;return null==(l=y.value[e])?void 0:l.id}));I(e,c.value)||(c.value=e)}else{const l=null==(n=y.value[f.value])?void 0:n.id;if(void 0===l)return void e.nextTick((()=>{f.value=void 0}));I(l,c.value)||(c.value=l)}else{const l=Array.isArray(f.value)?null==(u=f.value)?void 0:u[0]:f.value;(null==(o=y.value[l])?void 0:o.id)?c.value!==(null==(t=y.value[l])?void 0:t.id)&&(c.value=null==(r=y.value[l])?void 0:r.id):e.nextTick((()=>{f.value=void 0}))}else c.value=void 0})),e.watch((()=>c.value),((l,a)=>{if(!I(l,a))if(void 0!==c.value)if(s.free){if(s.free)if(Array.isArray(c.value)){const l=c.value.map((e=>y.value.findIndex((l=>l.id===e)))).filter((e=>-1!==e));l.length>0?I(l,f.value)||(f.value=l):e.nextTick((()=>{c.value=void 0}))}else{const e=y.value.findIndex((e=>e.id===c.value));I(e,f.value)||(f.value=e)}}else{const l=Array.isArray(c.value)?y.value.findIndex((e=>{var l;return e.id===(null==(l=c.value)?void 0:l[0])})):y.value.findIndex((e=>e.id===c.value));-1!==l?f.value!==l&&(f.value=l):e.nextTick((()=>{c.value=void 0}))}else f.value=void 0}),{deep:!0}),e.watch((()=>s.free),(e=>{c.value&&(!e&&Array.isArray(c.value)?c.value=c.value[0]:e&&!Array.isArray(c.value)&&(c.value=[c.value]))})),e.provide(l.accordionInjectionKey,{openItem:e.toRef((()=>c.value)),free:e.toRef((()=>s.free)),initialAnimation:e.toRef((()=>s.initialAnimation)),lazy:e.toRef((()=>s.lazy)),unmountLazy:e.toRef((()=>s.unmountLazy)),setOpenItem:e=>{!s.free||Array.isArray(c.value)?(s.free||!Array.isArray(c.value))&&Array.isArray(c.value)?c.value.includes(e)||(c.value=[...c.value,e]):c.value=e:void 0!==c.value?c.value=[c.value,e]:c.value=[e]},setCloseItem:e=>{if(s.free||!Array.isArray(c.value))if(Array.isArray(c.value)){const l=c.value.filter((l=>l!==e));c.value=l.length?l:void 0}else c.value===e&&(c.value=void 0);else c.value=void 0},registerAccordionItem:(e,l)=>{y.value=[...y.value,{id:e,el:l}],y.value.length===p.value.length&&A()},unregisterAccordionItem:e=>{y.value=y.value.filter((l=>l.id!==e))}}),(l,a)=>(e.openBlock(),e.createElementBlock("div",{id:e.unref(h),class:e.normalizeClass(["accordion",g.value])},[e.renderSlot(l.$slots,"default")],10,d))}});exports._sfc_main=v,exports._sfc_main$1=i;
//# sourceMappingURL=BAccordion.vue_vue_type_script_setup_true_lang-CQUY5qZj.js.map
