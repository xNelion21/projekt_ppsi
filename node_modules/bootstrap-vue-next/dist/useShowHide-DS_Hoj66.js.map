{"version":3,"file":"useShowHide-DS_Hoj66.js","sources":["../src/composables/useShowHide.ts"],"sourcesContent":["import {\n  type ComponentInternalInstance,\n  computed,\n  type EmitFn,\n  getCurrentInstance,\n  inject,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  onUnmounted,\n  readonly,\n  ref,\n  type Ref,\n  watch,\n} from 'vue'\nimport {globalShowHideStorageInjectionKey} from '../utils/keys'\nimport {BvTriggerableEvent} from '../utils'\nimport {useEventListener, useThrottleFn} from '@vueuse/core'\n\nexport const fadeBaseTransitionProps = {\n  name: 'fade',\n  enterActiveClass: '',\n  enterFromClass: 'showing',\n  enterToClass: '',\n  leaveActiveClass: '',\n  leaveFromClass: '',\n  leaveToClass: 'showing',\n  css: true,\n}\n\ninterface TransitionProps {\n  onBeforeEnter?: (el: Element) => void\n  onEnter?: (el: Element) => void\n  onAfterEnter?: (el: Element) => void\n  onBeforeLeave?: (el: Element) => void\n  onLeave?: (el: Element) => void\n  onAfterLeave?: (el: Element) => void\n  enterToClass?: string\n  leaveToClass?: string\n  enterFromClass?: string\n  leaveFromClass?: string\n  enterActiveClass?: string\n  leaveActiveClass?: string\n}\n\nexport const useShowHide = (\n  modelValue: Ref<boolean | number>,\n  props: {\n    visible?: boolean\n    show?: boolean\n    noAnimation?: boolean\n    noFade?: boolean\n    noCloseOnBackdrop?: boolean\n    noCloseOnEsc?: boolean\n    transitionProps?: TransitionProps\n    lazy?: boolean\n    initialAnimation?: boolean\n    delay?:\n      | number\n      | {\n          show: number\n          hide: number\n        }\n  } & Record<string, unknown>,\n  emit: EmitFn,\n  element: Ref<HTMLElement | null>,\n  computedId: Ref<string>,\n  options: {\n    transitionProps?: TransitionProps\n    showFn?: () => void\n    hideFn?: () => void\n  } = {\n    transitionProps: {},\n    showFn: () => {},\n    hideFn: () => {},\n  }\n) => {\n  let noAction = false\n  const initialShow = (!!modelValue.value && !props.initialAnimation) || props.visible || false\n  const showRef = ref<boolean>(initialShow)\n  const renderRef = ref<boolean>(initialShow)\n  const renderBackdropRef = ref<boolean>(initialShow)\n\n  let isCountdown = typeof modelValue.value !== 'boolean'\n\n  watch(modelValue, () => {\n    isCountdown = typeof modelValue.value !== 'boolean'\n    if (noAction) {\n      noAction = false\n      return\n    }\n    if (modelValue.value) {\n      show()\n    } else {\n      hide('modelValue', true)\n    }\n  })\n\n  const localNoAnimation = ref(initialShow)\n  const localTemporaryHide = ref(false)\n  const computedNoAnimation = computed(\n    () => props.noAnimation || props.noFade || localNoAnimation.value || false\n  )\n  let isMounted = false\n  onMounted(() => {\n    isMounted = true\n    if (!props.show && initialShow) {\n      // show without delay or animation\n      const event = buildTriggerableEvent('show', {cancelable: true})\n      emit('show', event)\n\n      if (event.defaultPrevented) {\n        emit('show-prevented', buildTriggerableEvent('show-prevented'))\n        return\n      }\n      localNoAnimation.value = true\n      if (!modelValue.value) {\n        noAction = true\n        modelValue.value = true\n      }\n      renderRef.value = true\n      renderBackdropRef.value = true\n      isVisible.value = true\n      backdropVisible.value = true\n      backdropReady.value = true\n      showRef.value = true\n      options.showFn?.()\n    } else if (props.show || (!!modelValue.value && props.initialAnimation)) {\n      show()\n    }\n  })\n\n  watch(\n    () => props.visible,\n    (newval) => {\n      localNoAnimation.value = true\n\n      nextTick(() => {\n        if (newval) isVisible.value = true\n        if (newval) {\n          show()\n        } else {\n          hide('visible-prop', true)\n        }\n      })\n    }\n  )\n  watch(\n    () => props.show,\n    (newval) => {\n      if (newval) {\n        show()\n      } else {\n        hide('show-prop', true)\n      }\n    }\n  )\n  // todo: remove\n  useEventListener(element, 'bv-toggle', () => {\n    modelValue.value = !modelValue.value\n  })\n\n  const buildTriggerableEvent = (\n    type: string,\n    opts: Readonly<Partial<BvTriggerableEvent>> = {}\n  ): BvTriggerableEvent =>\n    new BvTriggerableEvent(type, {\n      cancelable: false,\n      target: element?.value || null,\n      relatedTarget: null,\n      trigger: null,\n      ...opts,\n      componentId: computedId?.value,\n    })\n\n  let showTimeout: ReturnType<typeof setTimeout> | undefined\n  let hideTimeout: ReturnType<typeof setTimeout> | undefined\n  let _Resolve: ((value: boolean | string) => void) | undefined\n  let _Promise: Promise<boolean | string> | undefined\n  let _resolveOnHide: boolean | undefined\n  const show = (resolveOnHide: boolean = false): Promise<boolean | string> => {\n    if (showRef.value && !hideTimeout && !_Promise) return Promise.resolve(true)\n    _resolveOnHide = resolveOnHide\n    if (showRef.value && !hideTimeout && _Promise) return _Promise\n\n    _Promise = new Promise<boolean | string>((resolve) => {\n      _Resolve = resolve\n    })\n\n    const event = buildTriggerableEvent('show', {cancelable: true})\n    emit('show', event)\n\n    if (event.defaultPrevented) {\n      emit('show-prevented', buildTriggerableEvent('show-prevented'))\n      if (isVisible.value) {\n        isVisible.value = false\n      }\n      if (modelValue.value && !isCountdown) {\n        noAction = true\n        nextTick(() => {\n          modelValue.value = false\n        })\n      }\n      _Resolve?.('show-prevented')\n      return _Promise\n    }\n    if (hideTimeout) {\n      clearTimeout(hideTimeout)\n      hideTimeout = undefined\n    }\n    renderRef.value = true\n    renderBackdropRef.value = true\n    requestAnimationFrame(() => {\n      if (localNoAnimation.value || props.delay === undefined) {\n        if (!isMounted) return\n        showTimeout = undefined\n        showRef.value = true\n        options.showFn?.()\n        if (!modelValue.value) {\n          noAction = true\n          nextTick(() => {\n            modelValue.value = true\n          })\n        }\n        return\n      }\n      showTimeout = setTimeout(\n        () => {\n          if (!isMounted) return\n          showTimeout = undefined\n          showRef.value = true\n          options.showFn?.()\n          if (!modelValue.value) {\n            noAction = true\n            nextTick(() => {\n              modelValue.value = true\n            })\n          }\n        },\n        typeof props.delay === 'number' ? props.delay : props.delay?.show || 0\n      )\n    })\n    return _Promise\n  }\n\n  let leaveTrigger: string | undefined\n  const hide = (trigger?: string, noTriggerEmit?: boolean): Promise<string> => {\n    if (!showRef.value && !showTimeout) return Promise.resolve('')\n    if (!_Promise)\n      _Promise = new Promise<string>((resolve) => {\n        ;(_Resolve as (value: string | PromiseLike<string>) => void) = resolve\n      })\n    if (typeof trigger !== 'string') trigger = undefined\n    leaveTrigger = trigger\n    const event = buildTriggerableEvent('hide', {cancelable: true, trigger})\n    const event2 = buildTriggerableEvent(trigger || 'ignore', {cancelable: true, trigger})\n    if (\n      (trigger === 'backdrop' && props.noCloseOnBackdrop) ||\n      (trigger === 'esc' && props.noCloseOnEsc)\n    ) {\n      emit('hide-prevented', buildTriggerableEvent('hide-prevented', {trigger}))\n      _Resolve?.('hide-prevented')\n      return _Promise as Promise<string>\n    }\n    if (showTimeout) {\n      clearTimeout(showTimeout)\n      showTimeout = undefined\n    }\n    if (trigger && !noTriggerEmit) {\n      emit(trigger, event2)\n    }\n    emit('hide', event)\n\n    if (event.defaultPrevented || event2.defaultPrevented) {\n      emit('hide-prevented', buildTriggerableEvent('hide-prevented', {trigger}))\n      if (!modelValue.value) {\n        nextTick(() => {\n          noAction = true\n          modelValue.value = true\n        })\n      }\n      _Resolve?.('hide-prevented')\n      return _Promise as Promise<string>\n    }\n    trapActive.value = false\n    if (showTimeout) {\n      clearTimeout(showTimeout)\n      showTimeout = undefined\n      if (!localTemporaryHide.value) renderRef.value = false\n      renderBackdropRef.value = false\n    }\n    hideTimeout = setTimeout(\n      () => {\n        if (!isMounted) return\n        hideTimeout = undefined\n        isLeaving.value = true\n        showRef.value = false\n        options.hideFn?.()\n        if (modelValue.value) {\n          noAction = true\n          modelValue.value = isCountdown ? 0 : false\n        }\n      },\n      localNoAnimation.value\n        ? 0\n        : typeof props.delay === 'number'\n          ? props.delay\n          : props.delay?.hide || 0\n    )\n    return _Promise as Promise<string>\n  }\n  const throttleHide = useThrottleFn((a) => hide(a), 500)\n  const throttleShow = useThrottleFn(() => show(), 500)\n\n  const toggle = (resolveOnHide: boolean = false): Promise<boolean | string> => {\n    const e = buildTriggerableEvent('toggle', {cancelable: true})\n    emit('toggle', e)\n    if (e.defaultPrevented) {\n      emit('toggle-prevented', buildTriggerableEvent('toggle-prevented'))\n      return Promise.resolve('toggle-prevented')\n    }\n    if (showRef.value) {\n      return hide('toggle-function', true)\n    }\n    return show(resolveOnHide)\n  }\n  const triggerToggle = () => {\n    const e = buildTriggerableEvent('toggle', {cancelable: true})\n    emit('toggle', e)\n    if (e.defaultPrevented) {\n      emit('toggle-prevented', buildTriggerableEvent('toggle-prevented'))\n      return\n    }\n    if (showRef.value) {\n      hide('toggle-trigger', true)\n    } else {\n      show()\n    }\n  }\n  const triggerRegistry: {trigger: string; el: Element}[] = []\n  const registerTrigger = (trigger: string, el: Element) => {\n    triggerRegistry.push({trigger, el})\n    el.addEventListener(trigger, triggerToggle)\n    checkVisibility(el)\n  }\n  const unregisterTrigger = (trigger: string, el: Element, clean = true) => {\n    const idx = triggerRegistry.findIndex((t) => t?.trigger === trigger && t.el === el)\n    if (idx > -1) {\n      triggerRegistry.splice(idx, 1)\n      el.removeEventListener(trigger, triggerToggle)\n      if (clean) {\n        el.removeAttribute('aria-expanded')\n        el.classList.remove('collapsed')\n        el.classList.remove('not-collapsed')\n      }\n    }\n  }\n\n  const appRegistry = inject(globalShowHideStorageInjectionKey, undefined)?.register({\n    id: computedId.value,\n    toggle,\n    show,\n    hide,\n    value: readonly(showRef),\n    registerTrigger,\n    unregisterTrigger,\n    component: getCurrentInstance() as ComponentInternalInstance,\n  })\n  const checkVisibility = (el: Element) => {\n    el.setAttribute('aria-expanded', modelValue.value ? 'true' : 'false')\n    el.classList.toggle('collapsed', !modelValue.value)\n    el.classList.toggle('not-collapsed', !!modelValue.value)\n  }\n\n  watch(modelValue, () => {\n    triggerRegistry.forEach((t) => {\n      checkVisibility(t.el)\n    })\n  })\n\n  onBeforeUnmount(() => {\n    appRegistry?.unregister()\n    triggerRegistry.forEach((t) => {\n      t.el.removeEventListener(t.trigger, triggerToggle)\n    })\n  })\n  onUnmounted(() => {\n    isMounted = false\n    clearTimeout(showTimeout)\n    clearTimeout(hideTimeout)\n    showTimeout = undefined\n    hideTimeout = undefined\n  })\n\n  const lazyLoadCompleted = ref(false)\n  const markLazyLoadCompleted = () => {\n    if (props.lazy === true) lazyLoadCompleted.value = true\n  }\n\n  const isLeaving = ref(false)\n  const isActive = ref(initialShow)\n  const isVisible = ref(initialShow)\n\n  const onBeforeEnter = (el: Element) => {\n    options.transitionProps?.onBeforeEnter?.(el)\n    props.transitionProps?.onBeforeEnter?.(el)\n    isActive.value = true\n  }\n  const onEnter = (el: Element) => {\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        // sometimes one just isn't enough (offcanvas on the first load after refresh)\n        isVisible.value = true\n      })\n    })\n    options.transitionProps?.onEnter?.(el)\n    props.transitionProps?.onEnter?.(el)\n  }\n  const onAfterEnter = (el: Element) => {\n    markLazyLoadCompleted()\n    options.transitionProps?.onAfterEnter?.(el)\n    props.transitionProps?.onAfterEnter?.(el)\n    if (localNoAnimation.value) {\n      requestAnimationFrame(() => {\n        localNoAnimation.value = false\n      })\n    }\n    if (localTemporaryHide.value) {\n      localTemporaryHide.value = false\n    }\n    requestAnimationFrame(() => {\n      trapActive.value = true\n      nextTick(() => {\n        emit('shown', buildTriggerableEvent('shown', {cancelable: false}))\n      })\n    })\n    if (!_resolveOnHide) {\n      _Resolve?.(true)\n      _Promise = undefined\n      _Resolve = undefined\n    }\n  }\n  const onBeforeLeave = (el: Element) => {\n    if (!isLeaving.value) isLeaving.value = true\n    options.transitionProps?.onBeforeLeave?.(el)\n    props.transitionProps?.onBeforeLeave?.(el)\n    trapActive.value = false\n  }\n  const onLeave = (el: Element) => {\n    isVisible.value = false\n    options.transitionProps?.onLeave?.(el)\n    props.transitionProps?.onLeave?.(el)\n  }\n  const onAfterLeave = (el: Element) => {\n    emit('hidden', buildTriggerableEvent('hidden', {trigger: leaveTrigger, cancelable: false}))\n    options.transitionProps?.onAfterLeave?.(el)\n    props.transitionProps?.onAfterLeave?.(el)\n    isLeaving.value = false\n    isActive.value = false\n    if (localNoAnimation.value) {\n      requestAnimationFrame(() => {\n        localNoAnimation.value = false\n      })\n    }\n    requestAnimationFrame(() => {\n      if (!localTemporaryHide.value) renderRef.value = false\n    })\n    _Resolve?.(leaveTrigger || '')\n    _Promise = undefined\n    _Resolve = undefined\n    leaveTrigger = undefined\n  }\n\n  const contentShowing = computed(\n    () =>\n      localTemporaryHide.value === true ||\n      isActive.value === true ||\n      props.lazy === false ||\n      (props.lazy === true && lazyLoadCompleted.value === true && props.unmountLazy === false)\n  )\n  const trapActive = ref(false)\n  const backdropVisible = ref(false)\n  const backdropReady = ref(false)\n\n  const transitionFunctions = {\n    ...options.transitionProps,\n    onBeforeEnter,\n    onEnter,\n    onAfterEnter,\n    onBeforeLeave,\n    onLeave,\n    onAfterLeave,\n  }\n  return {\n    showRef,\n    renderRef,\n    renderBackdropRef,\n    isVisible,\n    isActive,\n    trapActive,\n    show,\n    hide,\n    toggle,\n    throttleHide,\n    throttleShow,\n    buildTriggerableEvent,\n    computedNoAnimation,\n    localNoAnimation,\n    localTemporaryHide,\n    isLeaving,\n    transitionProps: {\n      ...fadeBaseTransitionProps,\n      ...props.transitionProps,\n      ...transitionFunctions,\n    },\n\n    lazyLoadCompleted,\n    markLazyLoadCompleted,\n    contentShowing,\n    backdropReady,\n    backdropVisible,\n    backdropTransitionProps: {\n      ...fadeBaseTransitionProps,\n      onBeforeEnter: () => {\n        requestAnimationFrame(() => {\n          requestAnimationFrame(() => {\n            backdropVisible.value = true\n          })\n        })\n        backdropReady.value = false\n      },\n      onAfterEnter: () => {\n        backdropReady.value = true\n      },\n      onBeforeLeave: () => {\n        backdropVisible.value = false\n      },\n      onAfterLeave: () => {\n        backdropReady.value = false\n        requestAnimationFrame(() => {\n          renderBackdropRef.value = false\n        })\n      },\n    },\n  }\n}\n"],"names":["fadeBaseTransitionProps","name","enterActiveClass","enterFromClass","enterToClass","leaveActiveClass","leaveFromClass","leaveToClass","css","modelValue","props","emit","element","computedId","options","transitionProps","showFn","hideFn","noAction","initialShow","value","initialAnimation","visible","showRef","ref","renderRef","renderBackdropRef","isCountdown","vue","watch","show","hide","localNoAnimation","localTemporaryHide","computedNoAnimation","computed","noAnimation","noFade","isMounted","onMounted","event","buildTriggerableEvent","cancelable","defaultPrevented","isVisible","backdropVisible","backdropReady","_a","call","newval","nextTick","type","opts","BvTriggerableEvent","target","relatedTarget","trigger","componentId","showTimeout","hideTimeout","_Resolve","_Promise","_resolveOnHide","resolveOnHide","Promise","resolve","clearTimeout","requestAnimationFrame","delay","setTimeout","_b","leaveTrigger","noTriggerEmit","event2","noCloseOnBackdrop","noCloseOnEsc","trapActive","isLeaving","throttleHide","useThrottleFn","a","throttleShow","toggle","e","triggerToggle","triggerRegistry","appRegistry","inject","globalShowHideStorageInjectionKey","register","id","readonly","registerTrigger","el","push","addEventListener","checkVisibility","unregisterTrigger","clean","idx","findIndex","t","splice","removeEventListener","removeAttribute","classList","remove","component","getCurrentInstance","setAttribute","forEach","onBeforeUnmount","unregister","onUnmounted","lazyLoadCompleted","markLazyLoadCompleted","lazy","isActive","contentShowing","unmountLazy","transitionFunctions","onBeforeEnter","_d","_c","onEnter","onAfterEnter","onBeforeLeave","onLeave","onAfterLeave","backdropTransitionProps"],"mappings":"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"}