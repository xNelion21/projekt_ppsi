{"version":3,"file":"BTabs.vue_vue_type_script_setup_true_lang-C3KSUU35.js","sources":["../src/components/BTabs/BTab.vue","../src/components/BTabs/BTabs.vue"],"sourcesContent":["<template>\n  <component\n    :is=\"props.tag\"\n    :id=\"computedId\"\n    ref=\"_el\"\n    class=\"tab-pane\"\n    :class=\"computedClasses\"\n    role=\"tabpanel\"\n    :aria-labelledby=\"computedButtonId\"\n    v-bind=\"processedAttrs\"\n  >\n    <slot v-if=\"showSlot\" />\n  </component>\n</template>\n\n<script setup lang=\"ts\">\nimport {computed, inject, onUnmounted, ref, useAttrs, useTemplateRef, watch} from 'vue'\nimport {useId} from '../../composables/useId'\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {TabType} from '../../types/Tab'\nimport type {BTabProps} from '../../types/ComponentProps'\nimport {tabsInjectionKey} from '../../utils/keys'\n\nconst _props = withDefaults(defineProps<Omit<BTabProps, 'active'>>(), {\n  buttonId: undefined,\n  disabled: false,\n  id: undefined,\n  lazy: undefined,\n  unmountLazy: undefined,\n  noBody: false,\n  tag: 'div',\n  title: undefined,\n  titleItemClass: undefined,\n  titleLinkAttrs: undefined,\n  titleLinkClass: undefined,\n})\nconst props = useDefaults(_props, 'BTab')\n\nconst slots = defineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  title?: (props: Record<string, never>) => any\n}>()\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst activeModel = defineModel<Exclude<BTabProps['active'], undefined>>('active', {\n  default: false,\n})\n\nconst parentData = inject(tabsInjectionKey, null)\nconst computedId = useId(() => props.id, 'tabpane')\nconst computedButtonId = useId(() => props.buttonId, 'tab')\nconst internalId = useId('', 'tab-internal')\n\nconst lazyRenderCompleted = ref(false)\nconst el = useTemplateRef<HTMLElement>('_el')\n\nconst attrs = useAttrs()\nconst processedAttrs = computed(() => {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const {onClick: _, ...tabAttrs} = attrs\n  return tabAttrs\n})\n\nfunction updateTab() {\n  if (!parentData) return\n  parentData.registerTab(\n    computed(\n      () =>\n        ({\n          internalId: internalId.value,\n          id: computedId.value,\n          active: activeModel.value,\n          buttonId: computedButtonId.value,\n          disabled: props.disabled,\n          title: props.title,\n          titleComponent: slots.title,\n          titleItemClass: props.titleItemClass,\n          titleLinkAttrs: props.titleLinkAttrs,\n          titleLinkClass: props.titleLinkClass,\n          onClick: attrs.onClick,\n          el,\n        }) as TabType\n    )\n  )\n}\n\nif (parentData) {\n  updateTab()\n  if (activeModel.value) {\n    parentData.activateTab(internalId.value)\n  }\n}\n\nonUnmounted(() => {\n  if (!parentData) return\n  parentData.unregisterTab(internalId.value)\n})\n\nconst isActive = computed(() => parentData?.activeId.value === computedId.value)\nconst show = ref(isActive.value)\n\nconst computedLazy = computed(() => !!(parentData?.lazy.value || props.lazy))\n\nconst computedActive = computed(() => isActive.value && !props.disabled)\nconst showSlot = computed(\n  () =>\n    computedActive.value ||\n    !computedLazy.value ||\n    (computedLazy.value && !props.unmountLazy && lazyRenderCompleted.value)\n)\n\nwatch(showSlot, (shown) => {\n  if (shown && !lazyRenderCompleted.value) lazyRenderCompleted.value = true\n})\n\nwatch(isActive, (active) => {\n  if (active) {\n    activeModel.value = true\n    setTimeout(() => {\n      show.value = true\n    }, 0)\n    return\n  }\n  show.value = false\n  activeModel.value = false\n})\n\nwatch(activeModel, (active) => {\n  if (props.disabled) {\n    activeModel.value = false\n    return\n  }\n  if (!parentData) return\n  if (!active) {\n    if (isActive.value) {\n      parentData.activateTab(undefined)\n    }\n    return\n  }\n  if (!isActive.value) {\n    parentData.activateTab(internalId.value)\n  }\n})\n\nconst computedClasses = computed(() => [\n  {\n    'active': isActive.value,\n    'show': show.value,\n    'card-body': parentData?.card.value && props.noBody === false,\n    'fade': !parentData?.noFade.value,\n  },\n  show.value ? parentData?.activeTabClass.value : parentData?.inactiveTabClass.value,\n  parentData?.tabClass.value,\n])\n\ndefineExpose({\n  activate: () => {\n    activeModel.value = true\n  },\n  deactivate: () => {\n    activeModel.value = false\n  },\n})\n</script>\n","<template>\n  <component :is=\"props.tag\" :id=\"props.id\" class=\"tabs\" :class=\"computedClasses\">\n    <ReusableEmptyTab.define>\n      <div class=\"tab-content\" :class=\"props.contentClass\">\n        <slot />\n        <div\n          v-if=\"showEmpty\"\n          key=\"bv-empty-tab\"\n          class=\"tab-pane active\"\n          :class=\"{'card-body': props.card}\"\n        >\n          <slot name=\"empty\" />\n        </div>\n      </div>\n    </ReusableEmptyTab.define>\n\n    <ReusableEmptyTab.reuse v-if=\"props.end\" />\n    <div\n      :class=\"[\n        props.navWrapperClass,\n        {'card-header': props.card, 'ms-auto': vertical && props.end},\n      ]\"\n    >\n      <ul\n        class=\"nav\"\n        :class=\"[navTabsClasses, props.navClass]\"\n        role=\"tablist\"\n        :aria-orientation=\"props.vertical ? 'vertical' : 'horizontal'\"\n      >\n        <slot name=\"tabs-start\" />\n        <li\n          v-for=\"(tab, idx) in tabs\"\n          :key=\"tab.id ?? tab.internalId\"\n          class=\"nav-item\"\n          :class=\"tab.titleItemClass\"\n          role=\"presentation\"\n        >\n          <button\n            :id=\"tab.buttonId\"\n            class=\"nav-link\"\n            :class=\"[tab.navItemClasses, tab.titleLinkClass]\"\n            role=\"tab\"\n            :aria-controls=\"tab.id\"\n            :aria-selected=\"tab.active\"\n            :tabindex=\"props.noKeyNav ? undefined : tab.active ? undefined : -1\"\n            v-bind=\"tab.titleLinkAttrs\"\n            @keydown.left.exact=\"!props.vertical && keynav($event, -1)\"\n            @keydown.left.shift=\"!props.vertical && keynav($event, -999)\"\n            @keydown.up.exact=\"props.vertical && keynav($event, -1)\"\n            @keydown.up.shift=\"props.vertical && keynav($event, -999)\"\n            @keydown.right.exact=\"!props.vertical && keynav($event, 1)\"\n            @keydown.right.shift=\"!props.vertical && keynav($event, 999)\"\n            @keydown.down.exact=\"props.vertical && keynav($event, 1)\"\n            @keydown.down.shift=\"props.vertical && keynav($event, 999)\"\n            @keydown.page-up=\"keynav($event, -999)\"\n            @keydown.page-down=\"keynav($event, 999)\"\n            @keydown.home=\"keynav($event, -999)\"\n            @keydown.end=\"keynav($event, 999)\"\n            @click.stop=\"(e) => handleClick(e, idx)\"\n          >\n            <component :is=\"tab.titleComponent\" v-if=\"tab.titleComponent\" />\n            <template v-else>\n              {{ tab.title }}\n            </template>\n          </button>\n        </li>\n        <slot name=\"tabs-end\" />\n      </ul>\n    </div>\n    <ReusableEmptyTab.reuse v-if=\"!props.end\" />\n  </component>\n</template>\n\n<script setup lang=\"ts\">\nimport {computed, nextTick, provide, ref, type Ref, toRef, unref, type VNode, watch} from 'vue'\nimport {BvEvent} from '../../utils/classes'\nimport {useAlignment} from '../../composables/useAlignment'\nimport {createReusableTemplate} from '@vueuse/core'\nimport type {TabType} from '../../types/Tab'\nimport type {BTabsProps} from '../../types/ComponentProps'\nimport {tabsInjectionKey} from '../../utils/keys'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {sortSlotElementsByPosition} from '../../utils/dom'\nimport {flattenFragments} from '../../utils/flattenFragments'\nimport BTab from './BTab.vue'\n\nconst _props = withDefaults(defineProps<Omit<BTabsProps, 'modelValue' | 'activeIndex'>>(), {\n  activeNavItemClass: undefined,\n  activeTabClass: undefined,\n  align: undefined,\n  card: false,\n  contentClass: undefined,\n  end: false,\n  fill: false,\n  id: undefined,\n  inactiveNavItemClass: undefined,\n  inactiveTabClass: undefined,\n  justified: false,\n  lazy: false,\n  navClass: undefined,\n  navItemClass: undefined,\n  navWrapperClass: undefined,\n  noFade: false,\n  noKeyNav: false,\n  noNavStyle: false,\n  pills: false,\n  small: false,\n  tag: 'div',\n  tabClass: undefined,\n  underline: false,\n  vertical: false,\n})\nconst props = useDefaults(_props, 'BTabs')\n\nconst emit = defineEmits<{\n  'activate-tab': [\n    newTabId: string,\n    preTabId: string,\n    newTabIndex: number,\n    prevTabIndex: number,\n    event: BvEvent,\n  ]\n}>()\n\nconst slots = defineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'default'?: (props: Record<string, never>) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'empty'?: (props: Record<string, never>) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'tabs-end'?: (props: Record<string, never>) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'tabs-start'?: (props: Record<string, never>) => any\n}>()\n\nconst activeIndex = defineModel<Exclude<BTabsProps['index'], undefined>>('index', {\n  default: -1,\n})\nconst activeId = defineModel<BTabsProps['modelValue']>({\n  default: undefined,\n})\n\nconst ReusableEmptyTab = createReusableTemplate()\n\nconst tabsInternal = ref<Ref<TabType>[]>([])\n\nconst tabElementsArray = ref<VNode[]>([])\n\nconst updateTabElementsArray = () => {\n  const tabElements = flattenFragments(slots.default?.({}) ?? [])\n  tabElementsArray.value = (Array.isArray(tabElements) ? tabElements : [tabElements]).filter(\n    (tab) => tab.type === BTab\n  )\n}\nupdateTabElementsArray()\n\nwatch(\n  () => slots.default?.({}),\n  () => {\n    updateTabElementsArray()\n    nextTick(() => {\n      sortTabs()\n    })\n  }\n)\n\nconst tabs = computed(() => {\n  if (tabsInternal.value.length === 0) {\n    // fail back on the slot elements, the children haven't been registered yet\n    const _activeIndex = tabElementsArray.value.findIndex(\n      (tab) =>\n        (tab.props?.active !== undefined &&\n          (tab.props.disabled === false || tab.props.disabled === undefined)) ||\n        (activeId.value && tab.props?.id === activeId.value)\n    )\n    return tabElementsArray.value.map((tab, index) => {\n      const active =\n        _activeIndex !== -1\n          ? index === _activeIndex\n          : activeIndex.value > -1\n            ? index === activeIndex.value\n            : index === 0\n      return {\n        id: tab.props?.id,\n        internalId: `premount-${index}`, // temporary id for the tab\n        buttonId: tab.props?.buttonId,\n        disabled: tab.props?.disabled,\n        title: tab.props?.title,\n        titleComponent: (tab.children as {title: unknown})?.title,\n        titleItemClass: tab.props?.titleItemClass,\n        titleLinkAttrs: tab.props?.titleLinkAttrs,\n        titleLinkClass: tab.props?.titleLinkClass,\n        onClick: tab.props?.onClick,\n        active,\n        navItemClasses: [\n          {\n            active,\n            disabled: !(tab.props?.disabled === false || tab.props?.disabled === undefined),\n          },\n          active ? props.activeNavItemClass : props.inactiveNavItemClass,\n          props.navItemClass,\n        ],\n      }\n    })\n  }\n  return tabsInternal.value.map((_tab) => {\n    const tab = unref(_tab)\n    const active = tab.id === activeId.value\n\n    return {\n      ...tab,\n      active,\n      navItemClasses: [\n        {\n          active,\n          disabled: tab.disabled,\n        },\n        active ? props.activeNavItemClass : props.inactiveNavItemClass,\n        props.navItemClass,\n      ],\n    }\n  })\n})\n\nlet initialized = false\nlet updateInitialActiveIndex = false\nlet updateInitialActiveId = false\nif (activeIndex.value === -1 && activeId.value) {\n  if (tabs.value.findIndex((t) => t.id === activeId.value) !== -1) {\n    activeIndex.value = tabs.value.findIndex((t) => t.id === activeId.value)\n  } else {\n    updateInitialActiveIndex = true\n  }\n} else if (activeIndex.value > -1 && !activeId.value) {\n  if (tabs.value[activeIndex.value]?.id) {\n    activeId.value = tabs.value[activeIndex.value]?.id\n  } else {\n    updateInitialActiveId = true\n  }\n} else if (activeIndex.value === -1 && !activeId.value) {\n  activeIndex.value = 0\n  updateInitialActiveId = true\n}\n\nfunction updateInitialIndexAndId() {\n  // we get the computedIds after registering the tabs\n  if (updateInitialActiveIndex) {\n    const index = tabs.value.findIndex((t) => t.id === activeId.value)\n    if (index !== -1) {\n      nextTick(() => {\n        activeIndex.value = index\n        updateInitialActiveIndex = false\n      })\n    }\n  }\n  if (updateInitialActiveId) {\n    if (activeIndex.value > -1 && tabs.value[activeIndex.value]?.id) {\n      nextTick(() => {\n        activeId.value = tabs.value[activeIndex.value]?.id\n        updateInitialActiveId = false\n      })\n    }\n  }\n}\n\nupdateInitialIndexAndId()\n\nconst showEmpty = computed(() => !(tabs?.value && tabs.value.length > 0))\n\nconst computedClasses = computed(() => ({\n  'd-flex': props.vertical,\n  'align-items-start': props.vertical,\n}))\n\nconst alignment = useAlignment(() => props.align)\n\nconst navTabsClasses = computed(() => ({\n  'nav-pills': props.pills,\n  'nav-underline': props.underline,\n  'flex-column me-3': props.vertical,\n  [alignment.value]: props.align !== undefined,\n  'nav-fill': props.fill,\n  'card-header-tabs': props.card && !props.pills && !props.underline,\n  'card-header-pills': props.card && props.pills,\n  'nav-justified': props.justified,\n  'nav-tabs': !props.noNavStyle && !props.pills && !props.underline,\n  'small': props.small,\n}))\n\nconst handleClick = (event: Readonly<MouseEvent>, index: number) => {\n  if (\n    index >= 0 &&\n    !tabs.value[index].disabled &&\n    tabs.value[index]?.onClick &&\n    typeof tabs.value[index].onClick === 'function'\n  ) {\n    tabs.value[index].onClick?.(event)\n    if (event.defaultPrevented) {\n      document.getElementById(tabs.value[index].buttonId)?.blur()\n      return\n    }\n  }\n  activeIndex.value = index\n}\n\nconst keynav = (e: Event, direction: number) => {\n  if (tabs.value.length <= 0 || props.noKeyNav) return\n  e.preventDefault()\n  e.stopPropagation()\n  activeIndex.value = nextIndex(activeIndex.value + direction, direction)\n  nextTick(() => {\n    if (activeIndex.value >= 0) {\n      document.getElementById(tabs.value[activeIndex.value]?.buttonId)?.focus()\n    }\n  })\n}\n\nconst nextIndex = (start: number, direction: number) => {\n  let index = start\n  let minIdx = -1\n  let maxIdx = -1\n\n  for (let i = 0; i < tabs.value.length; i++) {\n    if (!tabs.value[i].disabled) {\n      if (minIdx === -1) minIdx = i\n      maxIdx = i\n    }\n  }\n\n  while (index >= minIdx && index <= maxIdx && tabs.value[index].disabled) {\n    index += direction\n  }\n\n  if (index < minIdx) index = minIdx\n  if (index > maxIdx) index = maxIdx\n\n  return index\n}\n\nlet previousIndex: number | undefined\nlet isReverting = false\nwatch(activeIndex, (newValue, oldValue) => {\n  // Early exit if there are no tabs or all tabs are disabled\n  if (tabs.value.length <= 0 || tabs.value.filter((t) => !t.disabled).length <= 0) {\n    return\n  }\n\n  // If we're reverting due to a prevented event, don't process further\n  if (isReverting) {\n    isReverting = false\n    return\n  }\n  // Calculate the next valid index\n  const index = nextIndex(newValue, newValue > oldValue ? 1 : -1)\n  if (index !== newValue) {\n    // If the index is not the same as the new value, set the previous index to the old value\n    // this is to prevent the event from being emitted twice\n    previousIndex = oldValue\n    activeIndex.value = index\n    return\n  }\n  // Emit the activate-tab event\n  const tabEvent = new BvEvent('activate-tab', {cancelable: true})\n  emit(\n    'activate-tab',\n    tabs.value[index]?.id,\n    tabs.value[previousIndex ?? oldValue]?.id,\n    index,\n    previousIndex ?? oldValue,\n    tabEvent\n  )\n  // If the event is prevented, revert to the previous index\n  if (tabEvent.defaultPrevented) {\n    isReverting = true\n    const prev = previousIndex ?? oldValue ?? nextIndex(0, 1)\n    previousIndex = undefined\n    // Update the active id this will also trigger the activeId watch which will update the activeIndex\n    // this is to make sure we handle case that starts with id change.\n    if (activeId.value !== tabs.value[prev]?.id) {\n      activeId.value = tabs.value[prev]?.id\n    }\n    nextTick(() => {\n      if (prev >= 0) {\n        document.getElementById(tabs.value[prev]?.buttonId)?.focus()\n      }\n    })\n    return\n  }\n\n  // Update the active id\n  if (activeId.value !== tabs.value[index]?.id) {\n    activeId.value = tabs.value[index]?.id\n  }\n  previousIndex = undefined\n})\n\nwatch(activeId, (newValue, oldValue) => {\n  if (tabs.value.length <= 0 || tabs.value.filter((t) => !t.disabled).length <= 0) {\n    return\n  }\n  const index = tabs.value.findIndex((t) => t.id === newValue)\n  // If the new tab is the same as the current tab, do nothing\n  if (index === activeIndex.value) return\n  const oldIndex = tabs.value.findIndex((t) => t.id === oldValue)\n  // If the new tab is disabled, find the next enabled tab\n  if (tabs.value[index]?.disabled) {\n    // activeIndex watcher will update the activeId to the next enabled tab\n    activeIndex.value = nextIndex(index, index > oldIndex ? 1 : -1)\n    return\n  }\n  // If the new tab is not found, find the first enabled tab\n  if (index === -1) {\n    // activeIndex watcher will update the activeId to the first enabled tab\n    activeIndex.value = nextIndex(0, 1)\n    nextTick(() => {\n      activeId.value = tabs.value[activeIndex.value]?.id\n    })\n    return\n  }\n  // change to the next tab\n  activeIndex.value = index\n})\n\nconst registerTab = (tab: Ref<TabType>) => {\n  const idx = tabsInternal.value.findIndex((t) => t.value.internalId === tab.value.internalId)\n  if (idx === -1) {\n    tabsInternal.value.push(tab)\n    if (initialized) {\n      nextTick(() => {\n        sortTabs()\n      })\n    }\n  } else {\n    tabsInternal.value[idx] = tab\n  }\n  if (tabsInternal.value.length === tabElementsArray.value.length && !initialized) {\n    sortTabs()\n    updateInitialIndexAndId()\n    initialized = true\n  }\n}\n\nconst sortTabs = () => {\n  tabsInternal.value.sort((a, b) => sortSlotElementsByPosition(a.value.el.value, b.value.el.value))\n  if (activeIndex.value !== tabs.value.findIndex((t) => t.id === activeId.value)) {\n    activeIndex.value = tabs.value.findIndex((t) => t.id === activeId.value)\n  }\n}\n\nconst unregisterTab = (id: string) => {\n  tabsInternal.value = tabsInternal.value.filter((t) => t.value.internalId !== id)\n}\n\nprovide(tabsInjectionKey, {\n  lazy: toRef(() => props.lazy),\n  card: toRef(() => props.card),\n  noFade: toRef(() => props.noFade),\n  activeTabClass: toRef(() => props.activeTabClass),\n  inactiveTabClass: toRef(() => props.inactiveTabClass),\n  tabClass: toRef(() => props.tabClass),\n  registerTab,\n  unregisterTab,\n  activeId,\n  activateTab: (internalId) => {\n    const idx = tabs.value.findIndex((t) => t.internalId === internalId)\n    if (internalId === undefined || idx === -1) {\n      activeIndex.value = nextIndex(0, 1)\n      return\n    }\n    activeIndex.value = idx\n  },\n})\n</script>\n"],"names":["_props","__props","props","useDefaults","slots","_useSlots","activeModel","_useModel","parentData","inject","tabsInjectionKey","computedId","useId","id","computedButtonId","buttonId","internalId","lazyRenderCompleted","ref","el","useTemplateRef","attrs","useAttrs","processedAttrs","computed","onClick","_","tabAttrs","registerTab","value","active","disabled","title","titleComponent","titleItemClass","titleLinkAttrs","titleLinkClass","activateTab","onUnmounted","unregisterTab","isActive","activeId","show","computedLazy","lazy","computedActive","showSlot","unmountLazy","shown","setTimeout","computedClasses","card","noBody","fade","noFade","activeTabClass","inactiveTabClass","tabClass","__expose","activate","deactivate","emit","__emit","activeIndex","ReusableEmptyTab","createReusableTemplate","tabsInternal","tabElementsArray","updateTabElementsArray","tabElements","flattenFragments","_a","default","call","Array","isArray","filter","tab","type","BTab","vue","watch","nextTick","sortTabs","tabs","length","_activeIndex","findIndex","_b","map","index","_c","_d","_e","children","_f","_g","_h","_i","navItemClasses","_j","_k","activeNavItemClass","inactiveNavItemClass","navItemClass","_tab","unref","initialized","updateInitialActiveIndex","updateInitialActiveId","updateInitialIndexAndId","t","showEmpty","vertical","alignment","useAlignment","align","navTabsClasses","pills","underline","fill","justified","noNavStyle","small","keynav","e","direction","noKeyNav","preventDefault","stopPropagation","nextIndex","document","getElementById","focus","start","minIdx","maxIdx","i","previousIndex","isReverting","newValue","oldValue","tabEvent","BvEvent","cancelable","defaultPrevented","prev","oldIndex","sort","a","b","sortSlotElementsByPosition","provide","toRef","idx","push","event","blur"],"mappings":"yzBAuBA,MAAMA,EAASC,EAaTC,EAAQC,EAAAA,YAAYH,EAAQ,QAE5BI,EAAQC,EAAAA,WAWRC,EAAcC,EAAAA,SAAqDN,EAAA,UAInEO,EAAaC,EAAAA,OAAOC,EAAAA,iBAAkB,MACtCC,EAAaC,EAAAA,OAAM,IAAMV,EAAMW,IAAI,WACnCC,EAAmBF,EAAAA,OAAM,IAAMV,EAAMa,UAAU,OAC/CC,EAAaJ,EAAAA,MAAM,GAAI,gBAEvBK,EAAsBC,OAAI,GAC1BC,EAAKC,iBAA4B,OAEjCC,EAAQC,EAAAA,WACRC,EAAiBC,EAAAA,UAAS,KAE9B,MAAOC,QAASC,KAAMC,GAAYN,EAC3B,OAAAM,CAAA,IA0BLnB,IAtBGA,GACMA,EAAAoB,YACTJ,EAAAA,UACE,KACG,CACCR,WAAYA,EAAWa,MACvBhB,GAAIF,EAAWkB,MACfC,OAAQxB,EAAYuB,MACpBd,SAAUD,EAAiBe,MAC3BE,SAAU7B,EAAM6B,SAChBC,MAAO9B,EAAM8B,MACbC,eAAgB7B,EAAM4B,MACtBE,eAAgBhC,EAAMgC,eACtBC,eAAgBjC,EAAMiC,eACtBC,eAAgBlC,EAAMkC,eACtBX,QAASJ,EAAMI,QACfN,UAQJb,EAAYuB,OACHrB,EAAA6B,YAAYrB,EAAWa,QAItCS,EAAAA,aAAY,KACL9B,GACMA,EAAA+B,cAAcvB,EAAWa,MAAK,IAGrC,MAAAW,EAAWhB,EAAAA,UAAS,WAAMhB,WAAYiC,SAASZ,SAAUlB,EAAWkB,QACpEa,EAAOxB,EAAAA,IAAIsB,EAASX,OAEpBc,EAAenB,YAAS,QAAqB,MAAZhB,OAAY,EAAAA,EAAAoC,KAAKf,SAAS3B,EAAM0C,QAEjEC,EAAiBrB,EAAAA,UAAS,IAAMgB,EAASX,QAAU3B,EAAM6B,WACzDe,EAAWtB,EAAAA,UACf,IACEqB,EAAehB,QACdc,EAAad,OACbc,EAAad,QAAU3B,EAAM6C,aAAe9B,EAAoBY,gBAG/DiB,GAAWE,IACXA,IAAU/B,EAAoBY,UAA2BA,OAAQ,EAAA,YAGjEW,GAAWV,IACf,GAAIA,EAKF,OAJAxB,EAAYuB,OAAQ,OACpBoB,YAAW,KACTP,EAAKb,OAAQ,CAAA,GACZ,GAGLa,EAAKb,OAAQ,EACbvB,EAAYuB,OAAQ,CAAA,YAGhBvB,GAAcwB,IACd5B,EAAM6B,SACRzB,EAAYuB,OAAQ,EAGjBrB,IACAsB,EAMAU,EAASX,OACDrB,EAAA6B,YAAYrB,EAAWa,OAN9BW,EAASX,OACXrB,EAAW6B,iBAAY,GAKc,IAIrC,MAAAa,EAAkB1B,EAAAA,UAAS,IAAM,CACrC,CACEM,OAAUU,EAASX,MACnBa,KAAQA,EAAKb,MACb,aAAa,MAAArB,OAAA,EAAAA,EAAY2C,KAAKtB,SAA0B,IAAjB3B,EAAMkD,OAC7CC,OAAS,MAAA7C,OAAA,EAAAA,EAAY8C,OAAOzB,QAE9Ba,EAAKb,MAAQ,MAAArB,OAAA,EAAAA,EAAY+C,eAAe1B,YAAQrB,WAAYgD,iBAAiB3B,YAC7ErB,WAAYiD,SAAS5B,gBAGV6B,EAAA,CACXC,SAAU,KACRrD,EAAYuB,OAAQ,CAAA,EAEtB+B,WAAY,KACVtD,EAAYuB,OAAQ,CAAA,+5CC/ExB,MAAM7B,EAASC,EA0BTC,EAAQC,EAAAA,YAAYH,EAAQ,SAE5B6D,EAAOC,EAUP1D,EAAQC,EAAAA,WAWR0D,EAAcxD,EAAAA,SAAqDN,EAAA,SAGnEwC,EAAWlC,EAAAA,SAEhBN,EAAA,cAEK+D,EAAmBC,EAAAA,yBAEnBC,EAAehD,EAAoBA,IAAA,IAEnCiD,EAAmBjD,EAAaA,IAAA,IAEhCkD,EAAyB,WACvB,MAAAC,EAAcC,EAAAA,kBAAiB,OAAAC,EAAAnE,EAAMoE,cAAND,EAAAA,EAAAE,KAAgBrE,EAAA,CAAA,KAAO,IAC3C+D,EAAAtC,OAAS6C,MAAMC,QAAQN,GAAeA,EAAc,CAACA,IAAcO,QACjFC,GAAQA,EAAIC,OAASC,GACxB,EAEqBX,IAEvBY,EAAAC,OACE,WAAM,OAAA,OAAAV,EAAAnE,EAAMoE,cAAND,EAAAA,EAAAE,OAAgB,OACtB,KACyBL,IACvBc,EAAAA,UAAS,KACEC,GAAA,GACV,IAIC,MAAAC,EAAO5D,EAAAA,UAAS,KAChB,GAA8B,IAA9B0C,EAAarC,MAAMwD,OAAc,CAE7B,MAAAC,EAAenB,EAAiBtC,MAAM0D,WACzCV,YACEN,YAAsB,KAAtB,OAAAA,EAAAM,EAAI3E,YAAJ,EAAAqE,EAAWzC,WACc,IAAvB+C,EAAI3E,MAAM6B,eAA6C,IAAvB8C,EAAI3E,MAAM6B,WAC5CU,EAASZ,QAAS,OAAA2D,EAAAX,EAAI3E,YAAJ,EAAAsF,EAAW3E,MAAO4B,EAASZ,KAAA,IAElD,OAAOsC,EAAiBtC,MAAM4D,KAAI,CAACZ,EAAKa,+BAChC,MAAA5D,GACa,IAAjBwD,EACII,IAAUJ,EACVvB,EAAYlC,OACV6D,EAAAA,IAAU3B,EAAYlC,MACZ,IAAV6D,EACD,MAAA,CACL7E,GAAI,OAAA0D,EAAAM,EAAI3E,cAAJqE,EAAW1D,GACfG,WAAY,YAAY0E,IACxB3E,SAAU,OAAAyE,EAAAX,EAAI3E,cAAJsF,EAAWzE,SACrBgB,SAAU,OAAA4D,EAAId,EAAA3E,YAAO,EAAAyF,EAAA5D,SACrBC,MAAO,OAAA4D,EAAIf,EAAA3E,YAAO,EAAA0F,EAAA5D,MAClBC,eAAiB,OAAA4D,EAAIhB,EAAAiB,eAA+B,EAAAD,EAAA7D,MACpDE,eAAgB,OAAA6D,EAAIlB,EAAA3E,YAAO,EAAA6F,EAAA7D,eAC3BC,eAAgB,OAAA6D,EAAInB,EAAA3E,YAAO,EAAA8F,EAAA7D,eAC3BC,eAAgB,OAAA6D,EAAIpB,EAAA3E,YAAO,EAAA+F,EAAA7D,eAC3BX,QAAS,OAAAyE,EAAIrB,EAAA3E,YAAO,EAAAgG,EAAAzE,QACpBK,SACAqE,eAAgB,CACd,CACErE,SACAC,YAAoC,KAAxB,OAAAqE,EAAAvB,EAAI3E,YAAJ,EAAAkG,EAAWrE,gBAA8C,KAAxB,OAAAsE,EAAAxB,EAAI3E,YAAJ,EAAAmG,EAAWtE,YAE1DD,EAAS5B,EAAMoG,mBAAqBpG,EAAMqG,qBAC1CrG,EAAMsG,cAEV,GACD,CAEH,OAAOtC,EAAarC,MAAM4D,KAAKgB,IACvB,MAAA5B,EAAM6B,QAAMD,GACZ3E,EAAS+C,EAAIhE,KAAO4B,EAASZ,MAE5B,MAAA,IACFgD,EACH/C,SACAqE,eAAgB,CACd,CACErE,SACAC,SAAU8C,EAAI9C,UAEhBD,EAAS5B,EAAMoG,mBAAqBpG,EAAMqG,qBAC1CrG,EAAMsG,cAEV,GACD,IAGH,IAAIG,GAAc,EACdC,GAA2B,EAC3BC,GAAwB,EAkB5B,SAASC,UAEP,GAAIF,EAA0B,CACtBlB,MAAAA,EAAQN,EAAKvD,MAAM0D,WAAWwB,GAAMA,EAAElG,KAAO4B,EAASZ,SAC1C,IAAd6D,GACFR,EAAAA,UAAS,KACPnB,EAAYlC,MAAQ6D,EACOkB,GAAA,CAAA,GAE/B,CAEEC,GACE9C,EAAYlC,OAAQ,IAAM,OAAA0C,EAAAa,EAAKvD,MAAMkC,EAAYlC,aAAvB0C,EAAAA,EAA+B1D,KAC3DqE,EAAAA,UAAS,WACEzC,EAAAZ,MAAQ,OAAA0C,EAAAa,EAAKvD,MAAMkC,EAAYlC,eAAvB0C,EAA+B1D,GACxBgG,GAAA,CAAA,GAG9B,EAnC8B,IAA5B9C,EAAYlC,OAAgBY,EAASZ,OAC0B,IAA7DuD,EAAKvD,MAAM0D,WAAWwB,GAAMA,EAAElG,KAAO4B,EAASZ,QACpCkC,EAAAlC,MAAQuD,EAAKvD,MAAM0D,WAAWwB,GAAMA,EAAElG,KAAO4B,EAASZ,QAEvC+E,GAAA,EAEpB7C,EAAYlC,OAAc,IAACY,EAASZ,OACzC,OAAA0C,IAAK1C,MAAMkC,EAAYlC,iBAAQhB,IACjC4B,EAASZ,MAAQ,OAAA2D,EAAKJ,EAAAvD,MAAMkC,EAAYlC,aAAQ,EAAA2D,EAAA3E,GAExBgG,GAAA,GAEW,IAA5B9C,EAAYlC,OAAiBY,EAASZ,QAC/CkC,EAAYlC,MAAQ,EACIgF,GAAA,GAwBFC,IAElB,MAAAE,EAAYxF,YAAS,aAAQ4D,WAAMvD,QAASuD,EAAKvD,MAAMwD,OAAS,KAEhEnC,EAAkB1B,EAAAA,UAAS,KAAO,CACtC,SAAUtB,EAAM+G,SAChB,oBAAqB/G,EAAM+G,aAGvBC,EAAYC,EAAAA,cAAa,IAAMjH,EAAMkH,QAErCC,EAAiB7F,EAAAA,UAAS,KAAO,CACrC,YAAatB,EAAMoH,MACnB,gBAAiBpH,EAAMqH,UACvB,mBAAoBrH,EAAM+G,SAC1B,CAACC,EAAUrF,YAAwB,IAAhB3B,EAAMkH,MACzB,WAAYlH,EAAMsH,KAClB,mBAAoBtH,EAAMiD,OAASjD,EAAMoH,QAAUpH,EAAMqH,UACzD,oBAAqBrH,EAAMiD,MAAQjD,EAAMoH,MACzC,gBAAiBpH,EAAMuH,UACvB,YAAavH,EAAMwH,aAAexH,EAAMoH,QAAUpH,EAAMqH,UACxDI,MAASzH,EAAMyH,UAmBXC,EAAS,CAACC,EAAUC,KACpB1C,EAAKvD,MAAMwD,QAAU,GAAKnF,EAAM6H,WACpCF,EAAEG,iBACFH,EAAEI,kBACFlE,EAAYlC,MAAQqG,EAAUnE,EAAYlC,MAAQiG,EAAWA,GAC7D5C,EAAAA,UAAS,aACHnB,EAAYlC,OAAS,IACd,OAAA2D,EAAA2C,SAAAC,eAAe,OAAA7D,EAAAa,EAAKvD,MAAMkC,EAAYlC,aAAvB0C,EAAAA,EAA+BxD,YAA9CyE,EAAyD6C,QAAM,IAE3E,EAGGH,EAAY,CAACI,EAAeR,KAChC,IAAIpC,EAAQ4C,EACRC,GAAS,EACTC,GAAS,EAEb,IAAA,IAASC,EAAI,EAAGA,EAAIrD,EAAKvD,MAAMwD,OAAQoD,IAChCrD,EAAKvD,MAAM4G,GAAG1G,gBACbwG,IAAwBA,EAAAE,GACnBD,EAAAC,GAIN/C,KAAAA,GAAS6C,GAAU7C,GAAS8C,GAAUpD,EAAKvD,MAAM6D,GAAO3D,UACpD2D,GAAAoC,EAMJpC,OAHHA,EAAQ6C,IAAgB7C,EAAA6C,GACxB7C,EAAQ8C,IAAgB9C,EAAA8C,GAErB9C,CAAAA,EAGL,IAAAgD,EACAC,GAAc,EACZ1D,EAAAA,MAAAlB,GAAa,CAAC6E,EAAUC,qBAE5B,GAAIzD,EAAKvD,MAAMwD,QAAU,GAAKD,EAAKvD,MAAM+C,QAAQmC,IAAOA,EAAEhF,WAAUsD,QAAU,EAC5E,OAIF,GAAIsD,EAEF,YADcA,GAAA,GAIhB,MAAMjD,EAAQwC,EAAUU,EAAUA,EAAWC,EAAW,GAAM,GAC9D,GAAInD,IAAUkD,EAKZ,OAFgBF,EAAAG,OAChB9E,EAAYlC,MAAQ6D,GAIhB,MAAAoD,EAAW,IAAIC,EAAAA,QAAQ,eAAgB,CAACC,YAAY,IAU1D,GATAnF,EACE,eACA,OAAAU,EAAAa,EAAKvD,MAAM6D,WAAXnB,EAAmB1D,GACnB,OAAA2E,EAAAJ,EAAKvD,MAAM6G,GAAiBG,WAA5BrD,EAAuC3E,GACvC6E,EACAgD,GAAiBG,EACjBC,GAGEA,EAASG,iBAAkB,CACfN,GAAA,EACd,MAAMO,EAAOR,GAAiBG,GAAYX,EAAU,EAAG,GAYvD,OAXgBQ,OAAA,EAGZjG,EAASZ,SAAU,OAAA8D,EAAAP,EAAKvD,MAAMqH,aAAOrI,MACvC4B,EAASZ,MAAQ,OAAA+D,EAAAR,EAAKvD,MAAMqH,SAAO,EAAAtD,EAAA/E,SAErCqE,EAAAA,UAAS,aACHgE,GAAQ,IACV,OAAA1D,EAAA2C,SAASC,eAAe,OAAA7D,EAAAa,EAAKvD,MAAMqH,SAAX3E,EAAAA,EAAkBxD,YAA1CyE,EAAqD6C,QAAM,GAG/D,CAIE5F,EAASZ,SAAU,OAAAgE,EAAAT,EAAKvD,MAAM6D,aAAQ7E,MACxC4B,EAASZ,MAAQ,OAAAkE,EAAAX,EAAKvD,MAAM6D,SAAQ,EAAAK,EAAAlF,IAEtB6H,OAAA,CAAA,IAGZzD,EAAAA,MAAAxC,GAAU,CAACmG,EAAUC,WACzB,GAAIzD,EAAKvD,MAAMwD,QAAU,GAAKD,EAAKvD,MAAM+C,QAAQmC,IAAOA,EAAEhF,WAAUsD,QAAU,EAC5E,OAEIK,MAAAA,EAAQN,EAAKvD,MAAM0D,WAAWwB,GAAMA,EAAElG,KAAO+H,IAE/ClD,GAAAA,IAAU3B,EAAYlC,MAAO,OAC3B,MAAAsH,EAAW/D,EAAKvD,MAAM0D,WAAWwB,GAAMA,EAAElG,KAAOgI,IAEtD,KAAI,OAAAtE,EAAAa,EAAKvD,MAAM6D,SAAX,EAAAnB,EAAmBxC,UAMvB,OAAkB,IAAd2D,GAEU3B,EAAAlC,MAAQqG,EAAU,EAAG,QACjChD,EAAAA,UAAS,WACEzC,EAAAZ,MAAQ,OAAA0C,EAAAa,EAAKvD,MAAMkC,EAAYlC,eAAvB0C,EAA+B1D,EAAA,UAKpDkD,EAAYlC,MAAQ6D,GAblB3B,EAAYlC,MAAQqG,EAAUxC,EAAOA,EAAQyD,EAAW,GAAM,EAa5CzD,IAGhB,MAmBAP,EAAW,KACfjB,EAAarC,MAAMuH,MAAK,CAACC,EAAGC,IAAMC,EAAAA,2BAA2BF,EAAExH,MAAMV,GAAGU,MAAOyH,EAAEzH,MAAMV,GAAGU,SACtFkC,EAAYlC,QAAUuD,EAAKvD,MAAM0D,WAAWwB,GAAMA,EAAElG,KAAO4B,EAASZ,UAC1DkC,EAAAlC,MAAQuD,EAAKvD,MAAM0D,WAAWwB,GAAMA,EAAElG,KAAO4B,EAASZ,QAAK,SAQ3E2H,EAAAA,QAAQ9I,EAAAA,iBAAkB,CACxBkC,KAAM6G,EAAAA,OAAM,IAAMvJ,EAAM0C,OACxBO,KAAMsG,EAAAA,OAAM,IAAMvJ,EAAMiD,OACxBG,OAAQmG,EAAAA,OAAM,IAAMvJ,EAAMoD,SAC1BC,eAAgBkG,EAAAA,OAAM,IAAMvJ,EAAMqD,iBAClCC,iBAAkBiG,EAAAA,OAAM,IAAMvJ,EAAMsD,mBACpCC,SAAUgG,EAAAA,OAAM,IAAMvJ,EAAMuD,WAC5B7B,YArCmBiD,IACb,MAAA6E,EAAMxF,EAAarC,MAAM0D,WAAWwB,GAAMA,EAAElF,MAAMb,aAAe6D,EAAIhD,MAAMb,cACjE,IAAZ0I,GACWxF,EAAArC,MAAM8H,KAAK9E,GACpB8B,GACFzB,EAAAA,UAAS,KACEC,GAAA,KAIAjB,EAAArC,MAAM6H,GAAO7E,EAExBX,EAAarC,MAAMwD,SAAWlB,EAAiBtC,MAAMwD,QAAWsB,IACzDxB,IACe2B,IACVH,GAAA,EAAA,EAuBhBpE,cAZqB1B,IACRqD,EAAArC,MAAQqC,EAAarC,MAAM+C,QAAQmC,GAAMA,EAAElF,MAAMb,aAAeH,GAAE,EAY/E4B,WACAJ,YAAcrB,IACN,MAAA0I,EAAMtE,EAAKvD,MAAM0D,WAAWwB,GAAMA,EAAE/F,aAAeA,IAKzD+C,EAAYlC,WAJO,IAAfb,IAAwC,IAAZ0I,EAIZA,EAHExB,EAAU,EAAG,EAGf,+9EApLH0B,UAA6BlE,MAErC,IACRN,EAAKvD,MAAM6D,GAAO3D,WACnB,OAAAwC,EAAAa,EAAKvD,MAAM6D,SAAX,EAAAnB,EAAmB9C,UACkB,mBAA9B2D,EAAKvD,MAAM6D,GAAOjE,UAEzB,OAAAkE,GAAAH,EAAAJ,EAAKvD,MAAM6D,IAAOjE,iBAAlB+D,EAA4BoE,GACxBA,EAAMX,kBACR,OAAArD,EAAAuC,SAASC,eAAehD,EAAKvD,MAAM6D,GAAO3E,YAAW6E,EAAAiE,OAIzD9F,EAAYlC,MAAQ6D,GAbF,IAACkE,EAA6BlE"}