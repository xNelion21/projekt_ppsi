"use strict";const e=require("vue"),l=require("./classes-BPvGsmbC.js"),a=require("./useAlignment-BTUJZ_9x.js"),t=require("./index-DiURjA3G.js"),i=require("./keys-W3DrYQSP.js"),n=require("./useDefaults-q0yyNSBk.js"),u=require("./dom-CoD-aJvn.js"),d=require("./flattenFragments-BAK-0GN6.js"),o=require("./useId-CVpYZavN.js"),v=e.defineComponent({inheritAttrs:!1,__name:"BTab",props:e.mergeModels({buttonId:{default:void 0},disabled:{type:Boolean,default:!1},id:{default:void 0},lazy:{type:Boolean,default:void 0},unmountLazy:{type:Boolean,default:void 0},noBody:{type:Boolean,default:!1},tag:{default:"div"},title:{default:void 0},titleItemClass:{default:void 0},titleLinkAttrs:{default:void 0},titleLinkClass:{default:void 0}},{active:{type:Boolean,default:!1},activeModifiers:{}}),emits:["update:active"],setup(l,{expose:a}){const t=l,u=n.useDefaults(t,"BTab"),d=e.useSlots(),v=e.useModel(l,"active"),s=e.inject(i.tabsInjectionKey,null),r=o.useId((()=>u.id),"tabpane"),c=o.useId((()=>u.buttonId),"tab"),f=o.useId("","tab-internal"),p=e.ref(!1),m=e.useTemplateRef("_el"),b=e.useAttrs(),C=e.computed((()=>{const{onClick:e,...l}=b;return l}));s&&(s&&s.registerTab(e.computed((()=>({internalId:f.value,id:r.value,active:v.value,buttonId:c.value,disabled:u.disabled,title:u.title,titleComponent:d.title,titleItemClass:u.titleItemClass,titleLinkAttrs:u.titleLinkAttrs,titleLinkClass:u.titleLinkClass,onClick:b.onClick,el:m})))),v.value&&s.activateTab(f.value)),e.onUnmounted((()=>{s&&s.unregisterTab(f.value)}));const y=e.computed((()=>(null==s?void 0:s.activeId.value)===r.value)),k=e.ref(y.value),h=e.computed((()=>!(!(null==s?void 0:s.lazy.value)&&!u.lazy))),I=e.computed((()=>y.value&&!u.disabled)),B=e.computed((()=>I.value||!h.value||h.value&&!u.unmountLazy&&p.value));e.watch(B,(e=>{e&&!p.value&&(p.value=!0)})),e.watch(y,(e=>{if(e)return v.value=!0,void setTimeout((()=>{k.value=!0}),0);k.value=!1,v.value=!1})),e.watch(v,(e=>{u.disabled?v.value=!1:s&&(e?y.value||s.activateTab(f.value):y.value&&s.activateTab(void 0))}));const g=e.computed((()=>[{active:y.value,show:k.value,"card-body":(null==s?void 0:s.card.value)&&!1===u.noBody,fade:!(null==s?void 0:s.noFade.value)},k.value?null==s?void 0:s.activeTabClass.value:null==s?void 0:s.inactiveTabClass.value,null==s?void 0:s.tabClass.value]));return a({activate:()=>{v.value=!0},deactivate:()=>{v.value=!1}}),(l,a)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(u).tag),e.mergeProps({id:e.unref(r),ref:"_el",class:["tab-pane",g.value],role:"tabpanel","aria-labelledby":e.unref(c)},C.value),{default:e.withCtx((()=>[B.value?e.renderSlot(l.$slots,"default",{key:0}):e.createCommentVNode("",!0)])),_:3},16,["id","class","aria-labelledby"]))}}),s=["aria-orientation"],r=["id","aria-controls","aria-selected","tabindex","onClick"],c=e.defineComponent({__name:"BTabs",props:e.mergeModels({activeNavItemClass:{default:void 0},activeTabClass:{default:void 0},align:{default:void 0},card:{type:Boolean,default:!1},contentClass:{default:void 0},end:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},id:{default:void 0},index:{},inactiveNavItemClass:{default:void 0},inactiveTabClass:{default:void 0},justified:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},navClass:{default:void 0},navItemClass:{default:void 0},navWrapperClass:{default:void 0},noFade:{type:Boolean,default:!1},noKeyNav:{type:Boolean,default:!1},noNavStyle:{type:Boolean,default:!1},pills:{type:Boolean,default:!1},small:{type:Boolean,default:!1},tag:{default:"div"},tabClass:{default:void 0},underline:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1}},{index:{default:-1},indexModifiers:{},modelValue:{default:void 0},modelModifiers:{}}),emits:e.mergeModels(["activate-tab"],["update:index","update:modelValue"]),setup(o,{emit:c}){var f,p;const m=o,b=n.useDefaults(m,"BTabs"),C=c,y=e.useSlots(),k=e.useModel(o,"index"),h=e.useModel(o,"modelValue"),I=t.createReusableTemplate(),B=e.ref([]),g=e.ref([]),x=()=>{var e;const l=d.flattenFragments((null==(e=y.default)?void 0:e.call(y,{}))??[]);g.value=(Array.isArray(l)?l:[l]).filter((e=>e.type===v))};x(),e.watch((()=>{var e;return null==(e=y.default)?void 0:e.call(y,{})}),(()=>{x(),e.nextTick((()=>{q()}))}));const w=e.computed((()=>{if(0===B.value.length){const e=g.value.findIndex((e=>{var l,a;return void 0!==(null==(l=e.props)?void 0:l.active)&&(!1===e.props.disabled||void 0===e.props.disabled)||h.value&&(null==(a=e.props)?void 0:a.id)===h.value}));return g.value.map(((l,a)=>{var t,i,n,u,d,o,v,s,r,c,f;const p=-1!==e?a===e:k.value>-1?a===k.value:0===a;return{id:null==(t=l.props)?void 0:t.id,internalId:`premount-${a}`,buttonId:null==(i=l.props)?void 0:i.buttonId,disabled:null==(n=l.props)?void 0:n.disabled,title:null==(u=l.props)?void 0:u.title,titleComponent:null==(d=l.children)?void 0:d.title,titleItemClass:null==(o=l.props)?void 0:o.titleItemClass,titleLinkAttrs:null==(v=l.props)?void 0:v.titleLinkAttrs,titleLinkClass:null==(s=l.props)?void 0:s.titleLinkClass,onClick:null==(r=l.props)?void 0:r.onClick,active:p,navItemClasses:[{active:p,disabled:!(!1===(null==(c=l.props)?void 0:c.disabled)||void 0===(null==(f=l.props)?void 0:f.disabled))},p?b.activeNavItemClass:b.inactiveNavItemClass,b.navItemClass]}}))}return B.value.map((l=>{const a=e.unref(l),t=a.id===h.value;return{...a,active:t,navItemClasses:[{active:t,disabled:a.disabled},t?b.activeNavItemClass:b.inactiveNavItemClass,b.navItemClass]}}))}));let T=!1,N=!1,K=!1;function M(){var l;if(N){const l=w.value.findIndex((e=>e.id===h.value));-1!==l&&e.nextTick((()=>{k.value=l,N=!1}))}K&&k.value>-1&&(null==(l=w.value[k.value])?void 0:l.id)&&e.nextTick((()=>{var e;h.value=null==(e=w.value[k.value])?void 0:e.id,K=!1}))}-1===k.value&&h.value?-1!==w.value.findIndex((e=>e.id===h.value))?k.value=w.value.findIndex((e=>e.id===h.value)):N=!0:k.value>-1&&!h.value?(null==(f=w.value[k.value])?void 0:f.id)?h.value=null==(p=w.value[k.value])?void 0:p.id:K=!0:-1!==k.value||h.value||(k.value=0,K=!0),M();const z=e.computed((()=>!((null==w?void 0:w.value)&&w.value.length>0))),L=e.computed((()=>({"d-flex":b.vertical,"align-items-start":b.vertical}))),j=a.useAlignment((()=>b.align)),V=e.computed((()=>({"nav-pills":b.pills,"nav-underline":b.underline,"flex-column me-3":b.vertical,[j.value]:void 0!==b.align,"nav-fill":b.fill,"card-header-tabs":b.card&&!b.pills&&!b.underline,"card-header-pills":b.card&&b.pills,"nav-justified":b.justified,"nav-tabs":!b.noNavStyle&&!b.pills&&!b.underline,small:b.small}))),_=(l,a)=>{w.value.length<=0||b.noKeyNav||(l.preventDefault(),l.stopPropagation(),k.value=E(k.value+a,a),e.nextTick((()=>{var e,l;k.value>=0&&(null==(l=document.getElementById(null==(e=w.value[k.value])?void 0:e.buttonId))||l.focus())})))},E=(e,l)=>{let a=e,t=-1,i=-1;for(let n=0;n<w.value.length;n++)w.value[n].disabled||(-1===t&&(t=n),i=n);for(;a>=t&&a<=i&&w.value[a].disabled;)a+=l;return a<t&&(a=t),a>i&&(a=i),a};let A,S=!1;e.watch(k,((a,t)=>{var i,n,u,d,o,v;if(w.value.length<=0||w.value.filter((e=>!e.disabled)).length<=0)return;if(S)return void(S=!1);const s=E(a,a>t?1:-1);if(s!==a)return A=t,void(k.value=s);const r=new l.BvEvent("activate-tab",{cancelable:!0});if(C("activate-tab",null==(i=w.value[s])?void 0:i.id,null==(n=w.value[A??t])?void 0:n.id,s,A??t,r),r.defaultPrevented){S=!0;const l=A??t??E(0,1);return A=void 0,h.value!==(null==(u=w.value[l])?void 0:u.id)&&(h.value=null==(d=w.value[l])?void 0:d.id),void e.nextTick((()=>{var e,a;l>=0&&(null==(a=document.getElementById(null==(e=w.value[l])?void 0:e.buttonId))||a.focus())}))}h.value!==(null==(o=w.value[s])?void 0:o.id)&&(h.value=null==(v=w.value[s])?void 0:v.id),A=void 0})),e.watch(h,((l,a)=>{var t;if(w.value.length<=0||w.value.filter((e=>!e.disabled)).length<=0)return;const i=w.value.findIndex((e=>e.id===l));if(i===k.value)return;const n=w.value.findIndex((e=>e.id===a));if(!(null==(t=w.value[i])?void 0:t.disabled))return-1===i?(k.value=E(0,1),void e.nextTick((()=>{var e;h.value=null==(e=w.value[k.value])?void 0:e.id}))):void(k.value=i);k.value=E(i,i>n?1:-1)}));const q=()=>{B.value.sort(((e,l)=>u.sortSlotElementsByPosition(e.value.el.value,l.value.el.value))),k.value!==w.value.findIndex((e=>e.id===h.value))&&(k.value=w.value.findIndex((e=>e.id===h.value)))};return e.provide(i.tabsInjectionKey,{lazy:e.toRef((()=>b.lazy)),card:e.toRef((()=>b.card)),noFade:e.toRef((()=>b.noFade)),activeTabClass:e.toRef((()=>b.activeTabClass)),inactiveTabClass:e.toRef((()=>b.inactiveTabClass)),tabClass:e.toRef((()=>b.tabClass)),registerTab:l=>{const a=B.value.findIndex((e=>e.value.internalId===l.value.internalId));-1===a?(B.value.push(l),T&&e.nextTick((()=>{q()}))):B.value[a]=l,B.value.length!==g.value.length||T||(q(),M(),T=!0)},unregisterTab:e=>{B.value=B.value.filter((l=>l.value.internalId!==e))},activeId:h,activateTab:e=>{const l=w.value.findIndex((l=>l.internalId===e));k.value=void 0!==e&&-1!==l?l:E(0,1)}}),(l,a)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(b).tag),{id:e.unref(b).id,class:e.normalizeClass(["tabs",L.value])},{default:e.withCtx((()=>[e.createVNode(e.unref(I).define,null,{default:e.withCtx((()=>[e.createElementVNode("div",{class:e.normalizeClass(["tab-content",e.unref(b).contentClass])},[e.renderSlot(l.$slots,"default"),z.value?(e.openBlock(),e.createElementBlock("div",{key:"bv-empty-tab",class:e.normalizeClass(["tab-pane active",{"card-body":e.unref(b).card}])},[e.renderSlot(l.$slots,"empty")],2)):e.createCommentVNode("",!0)],2)])),_:3}),e.unref(b).end?(e.openBlock(),e.createBlock(e.unref(I).reuse,{key:0})):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([e.unref(b).navWrapperClass,{"card-header":e.unref(b).card,"ms-auto":l.vertical&&e.unref(b).end}])},[e.createElementVNode("ul",{class:e.normalizeClass(["nav",[V.value,e.unref(b).navClass]]),role:"tablist","aria-orientation":e.unref(b).vertical?"vertical":"horizontal"},[e.renderSlot(l.$slots,"tabs-start"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(w.value,((l,t)=>(e.openBlock(),e.createElementBlock("li",{key:l.id??l.internalId,class:e.normalizeClass(["nav-item",l.titleItemClass]),role:"presentation"},[e.createElementVNode("button",e.mergeProps({id:l.buttonId,class:["nav-link",[l.navItemClasses,l.titleLinkClass]],role:"tab","aria-controls":l.id,"aria-selected":l.active,tabindex:e.unref(b).noKeyNav||l.active?void 0:-1,ref_for:!0},l.titleLinkAttrs,{onKeydown:[a[0]||(a[0]=e.withKeys(e.withModifiers((l=>!e.unref(b).vertical&&_(l,-1)),["exact"]),["left"])),a[1]||(a[1]=e.withKeys(e.withModifiers((l=>!e.unref(b).vertical&&_(l,-999)),["shift"]),["left"])),a[2]||(a[2]=e.withKeys(e.withModifiers((l=>e.unref(b).vertical&&_(l,-1)),["exact"]),["up"])),a[3]||(a[3]=e.withKeys(e.withModifiers((l=>e.unref(b).vertical&&_(l,-999)),["shift"]),["up"])),a[4]||(a[4]=e.withKeys(e.withModifiers((l=>!e.unref(b).vertical&&_(l,1)),["exact"]),["right"])),a[5]||(a[5]=e.withKeys(e.withModifiers((l=>!e.unref(b).vertical&&_(l,999)),["shift"]),["right"])),a[6]||(a[6]=e.withKeys(e.withModifiers((l=>e.unref(b).vertical&&_(l,1)),["exact"]),["down"])),a[7]||(a[7]=e.withKeys(e.withModifiers((l=>e.unref(b).vertical&&_(l,999)),["shift"]),["down"])),a[8]||(a[8]=e.withKeys((e=>_(e,-999)),["page-up"])),a[9]||(a[9]=e.withKeys((e=>_(e,999)),["page-down"])),a[10]||(a[10]=e.withKeys((e=>_(e,-999)),["home"])),a[11]||(a[11]=e.withKeys((e=>_(e,999)),["end"]))],onClick:e.withModifiers((e=>{return l=e,void((a=t)>=0&&!w.value[a].disabled&&(null==(i=w.value[a])?void 0:i.onClick)&&"function"==typeof w.value[a].onClick&&(null==(u=(n=w.value[a]).onClick)||u.call(n,l),l.defaultPrevented)?null==(d=document.getElementById(w.value[a].buttonId))||d.blur():k.value=a);var l,a,i,n,u,d}),["stop"])}),[l.titleComponent?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.titleComponent),{key:0})):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(l.title),1)],64))],16,r)],2)))),128)),e.renderSlot(l.$slots,"tabs-end")],10,s)],2),e.unref(b).end?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(I).reuse,{key:1}))])),_:3},8,["id","class"]))}});exports._sfc_main=v,exports._sfc_main$1=c;
//# sourceMappingURL=BTabs.vue_vue_type_script_setup_true_lang-C3KSUU35.js.map
