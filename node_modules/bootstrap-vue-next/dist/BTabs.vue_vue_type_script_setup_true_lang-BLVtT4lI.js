"use strict";const e=require("vue"),l=require("./classes-BPvGsmbC.js"),a=require("./useAlignment-BTUJZ_9x.js"),t=require("./index-DiURjA3G.js"),i=require("./keys-W3DrYQSP.js"),n=require("./useDefaults-q0yyNSBk.js"),o=require("./dom-Dzr6gmPm.js"),s=require("./useId-CVpYZavN.js"),d=e.defineComponent({inheritAttrs:!1,__name:"BTab",props:e.mergeModels({buttonId:{default:void 0},disabled:{type:Boolean,default:!1},id:{default:void 0},lazy:{type:Boolean,default:void 0},lazyOnce:{type:Boolean,default:void 0},noBody:{type:Boolean,default:!1},tag:{default:"div"},title:{default:void 0},titleItemClass:{default:void 0},titleLinkAttrs:{default:void 0},titleLinkClass:{default:void 0}},{active:{type:Boolean,default:!1},activeModifiers:{}}),emits:["update:active"],setup(l){const a=l,t=n.useDefaults(a,"BTab"),o=e.useSlots(),d=e.useModel(l,"active"),u=e.inject(i.tabsInjectionKey,null),r=s.useId((()=>t.id),"tabpane"),v=s.useId((()=>t.buttonId),"tab"),c=e.ref(!1),f=e.useTemplateRef("_el"),p=e.useAttrs(),m=e.computed((()=>{const{onClick:e,...l}=p;return l})),b=e.computed((()=>({id:r.value,buttonId:v.value,disabled:t.disabled,title:t.title,titleComponent:o.title,titleItemClass:()=>t.titleItemClass,titleLinkAttrs:()=>t.titleLinkAttrs,titleLinkClass:()=>t.titleLinkClass,onClick:()=>p.onClick,el:f.value})));u&&(u.registerTab(b),d.value&&u.activateTab(r.value)),e.onMounted((()=>{u&&u.sortTabs()})),e.onUnmounted((()=>{u&&u.unregisterTab(r.value)}));const y=e.computed((()=>(null==u?void 0:u.activeId.value)===r.value)),C=e.ref(y.value),h=e.computed((()=>!(!(null==u?void 0:u.lazy.value)&&!(t.lazyOnce??t.lazy)))),k=e.computed((()=>void 0!==t.lazyOnce)),B=e.computed((()=>y.value&&!t.disabled)),I=e.computed((()=>B.value||!h.value||h.value&&k.value&&c.value));e.watch(y,(e=>{if(e)return d.value=!0,void setTimeout((()=>{C.value=!0}),0);C.value=!1,d.value=!1})),e.watch(d,(e=>{u&&(e?u.activateTab(r.value):y.value&&u.activateTab(void 0))}));const g=e.computed((()=>[{active:y.value,show:C.value,"card-body":(null==u?void 0:u.card.value)&&!1===t.noBody,fade:!(null==u?void 0:u.noFade.value)},C.value?null==u?void 0:u.activeTabClass.value:null==u?void 0:u.inactiveTabClass.value,null==u?void 0:u.tabClass.value]));return e.watch(I,(e=>{e&&!c.value&&(c.value=!0)})),(l,a)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(t).tag),e.mergeProps({id:e.unref(r),ref:"_el",class:["tab-pane",g.value],role:"tabpanel","aria-labelledby":e.unref(v)},m.value),{default:e.withCtx((()=>[I.value?e.renderSlot(l.$slots,"default",{key:0}):e.createCommentVNode("",!0)])),_:3},16,["id","class","aria-labelledby"]))}});function u(l){return l.map((l=>l.type===e.Fragment?u(l.children):l)).flat()}const r=["aria-orientation"],v=["id","aria-controls","aria-selected","tabindex","onClick"],c=e.defineComponent({__name:"BTabs",props:e.mergeModels({activeNavItemClass:{default:void 0},activeTabClass:{default:void 0},align:{default:void 0},card:{type:Boolean,default:!1},contentClass:{default:void 0},end:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},id:{default:void 0},inactiveNavItemClass:{default:void 0},inactiveTabClass:{default:void 0},justified:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},navClass:{default:void 0},navItemClass:{default:void 0},navWrapperClass:{default:void 0},noFade:{type:Boolean,default:!1},noKeyNav:{type:Boolean,default:!1},noNavStyle:{type:Boolean,default:!1},pills:{type:Boolean,default:!1},small:{type:Boolean,default:!1},tag:{default:"div"},tabClass:{default:void 0},underline:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1}},{modelValue:{default:-1},modelModifiers:{},activeId:{default:void 0},activeIdModifiers:{}}),emits:e.mergeModels(["activate-tab","click"],["update:modelValue","update:activeId"]),setup(s,{emit:c}){const f=s,p=n.useDefaults(f,"BTabs"),m=c,b=e.useSlots(),y=e.useModel(s,"modelValue"),C=e.useModel(s,"activeId"),h=t.createReusableTemplate(),k=e.ref([]),B=e.computed((()=>{var l;const a=u((null==(l=b.default)?void 0:l.call(b,{}))??[]),t=(Array.isArray(a)?a:[a]).filter((e=>e.type===d));if(0===k.value.length){const e=t.findIndex((e=>{var l,a;return void 0!==(null==(l=e.props)?void 0:l.active)&&(!1===e.props.disabled||void 0===e.props.disabled)||C.value&&(null==(a=e.props)?void 0:a.id)===C.value}));return t.map(((l,a)=>{var t,i,n,o,s,d,u,r;const v=-1!==e?a===e:0===a;return{id:null==(t=l.props)?void 0:t.id,buttonId:null==(i=l.props)?void 0:i.buttonId,disabled:null==(n=l.props)?void 0:n.disabled,title:null==(o=l.props)?void 0:o.title,titleComponent:null==(s=l.children)?void 0:s.title,titleItemClass:()=>{var e;return null==(e=l.props)?void 0:e.titleItemClass},titleLinkAttrs:()=>{var e;return null==(e=l.props)?void 0:e.titleLinkAttrs},titleLinkClass:()=>{var e;return null==(e=l.props)?void 0:e.titleLinkClass},onClick:null==(d=l.props)?void 0:d.onClick,active:v,navItemClasses:[{active:v,disabled:!(!1===(null==(u=l.props)?void 0:u.disabled)||void 0===(null==(r=l.props)?void 0:r.disabled))},v?p.activeNavItemClass:p.inactiveNavItemClass,p.navItemClass]}}))}return k.value.map((l=>{const a=e.unref(l),t=a.id===C.value;return{...a,active:t,navItemClasses:[{active:t,disabled:a.disabled},t?p.activeNavItemClass:p.inactiveNavItemClass,p.navItemClass]}}))})),I=e.computed((()=>!((null==B?void 0:B.value)&&B.value.length>0))),g=e.computed((()=>({"d-flex":p.vertical,"align-items-start":p.vertical}))),w=a.useAlignment((()=>p.align)),T=e.computed((()=>({"nav-pills":p.pills,"nav-underline":p.underline,"flex-column me-3":p.vertical,[w.value]:void 0!==p.align,"nav-fill":p.fill,"card-header-tabs":p.card&&!p.pills&&!p.underline,"card-header-pills":p.card&&p.pills,"nav-justified":p.justified,"nav-tabs":!p.noNavStyle&&!p.pills&&!p.underline,small:p.small}))),x=e=>{var a;if(void 0!==e){const t=null==(a=B.value[e])?void 0:a.id;if(e>-1&&e<B.value.length&&!B.value[e].disabled&&(y.value<0||C.value!==t||y.value!==e)){const a=new l.BvEvent("activate-tab",{cancelable:!0});m("activate-tab",e,y.value,a),a.defaultPrevented||(C.value!==t&&(C.value=t),y.value!==e&&(y.value=e))}}},N=(e,l)=>{var a,t;B.value.length<=0||p.noKeyNav||(e.preventDefault(),e.stopPropagation(),y.value=M(y.value+l,l),null==(t=document.getElementById(null==(a=B.value[y.value])?void 0:a.buttonId))||t.focus())},M=(e,l)=>{let a=e,t=-1,i=-1;for(let n=0;n<B.value.length;n++)B.value[n].disabled||(-1===t&&(t=n),i=n);for(;a>=t&&a<=i&&B.value[a].disabled;)a+=l;return a<t&&(a=t),a>i&&(a=i),a};e.watch(y,((l,a)=>{if(l===a)return;if(B.value.length<=0)return;const t=M(l,l>a?1:-1);e.nextTick((()=>{x(t)}))})),e.watch(C,((e,l)=>{const a=B.value.findIndex((l=>l.id===e));e!==l&&(B.value.length<=0||x(-1!==a?a:M(0,1)))}));e.watch(k,(()=>{K()}),{deep:!0});const K=()=>{var e;if(0===B.value.length)return y.value=-1,void(C.value=void 0);y.value>=0&&!C.value&&(C.value=null==(e=B.value[y.value])?void 0:e.id),B.value.find((e=>e.id===C.value))?x(B.value.findIndex((e=>e.id===C.value))):x(B.value.map((e=>!e.disabled)).indexOf(!0))};return e.provide(i.tabsInjectionKey,{lazy:e.toRef((()=>p.lazy)),card:e.toRef((()=>p.card)),noFade:e.toRef((()=>p.noFade)),activeTabClass:e.toRef((()=>p.activeTabClass)),inactiveTabClass:e.toRef((()=>p.inactiveTabClass)),tabClass:e.toRef((()=>p.tabClass)),registerTab:e=>{k.value.find((l=>l.value.id===e.value.id))?k.value[k.value.findIndex((l=>l.value.id===e.value.id))]=e:k.value.push(e),k.value.sort(((e,l)=>o.sortSlotElementsByPosition(e.value.el,l.value.el))),K()},unregisterTab:e=>{k.value=k.value.filter((l=>l.value.id!==e))},activeId:C,activateTab:e=>{const l=B.value.findIndex((l=>l.id===e));x(void 0!==e&&-1!==l?l:M(0,1))},sortTabs:()=>{k.value.sort(((e,l)=>o.sortSlotElementsByPosition(e.value.el,l.value.el))),K()}}),(l,a)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(p).tag),{id:e.unref(p).id,class:e.normalizeClass(["tabs",g.value])},{default:e.withCtx((()=>[e.createVNode(e.unref(h).define,null,{default:e.withCtx((()=>[e.createElementVNode("div",{class:e.normalizeClass(["tab-content",e.unref(p).contentClass])},[e.renderSlot(l.$slots,"default"),I.value?(e.openBlock(),e.createElementBlock("div",{key:"bv-empty-tab",class:e.normalizeClass(["tab-pane active",{"card-body":e.unref(p).card}])},[e.renderSlot(l.$slots,"empty")],2)):e.createCommentVNode("",!0)],2)])),_:3}),e.unref(p).end?(e.openBlock(),e.createBlock(e.unref(h).reuse,{key:0})):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([e.unref(p).navWrapperClass,{"card-header":e.unref(p).card,"ms-auto":l.vertical&&e.unref(p).end}])},[e.createElementVNode("ul",{class:e.normalizeClass(["nav",[T.value,e.unref(p).navClass]]),role:"tablist","aria-orientation":e.unref(p).vertical?"vertical":"horizontal"},[e.renderSlot(l.$slots,"tabs-start"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(B.value,((l,t)=>{var i,n,o;return e.openBlock(),e.createElementBlock("li",{key:l.id,class:e.normalizeClass(["nav-item",null==(i=l.titleItemClass)?void 0:i.call(l)]),role:"presentation"},[e.createElementVNode("button",e.mergeProps({id:l.buttonId,class:["nav-link",[l.navItemClasses,null==(n=l.titleLinkClass)?void 0:n.call(l)]],role:"tab","aria-controls":l.id,"aria-selected":l.active,tabindex:e.unref(p).noKeyNav||l.active?void 0:-1,ref_for:!0},null==(o=l.titleLinkAttrs)?void 0:o.call(l),{onKeydown:[a[0]||(a[0]=e.withKeys(e.withModifiers((l=>!e.unref(p).vertical&&N(l,-1)),["exact"]),["left"])),a[1]||(a[1]=e.withKeys(e.withModifiers((l=>!e.unref(p).vertical&&N(l,-999)),["shift"]),["left"])),a[2]||(a[2]=e.withKeys(e.withModifiers((l=>e.unref(p).vertical&&N(l,-1)),["exact"]),["up"])),a[3]||(a[3]=e.withKeys(e.withModifiers((l=>e.unref(p).vertical&&N(l,-999)),["shift"]),["up"])),a[4]||(a[4]=e.withKeys(e.withModifiers((l=>!e.unref(p).vertical&&N(l,1)),["exact"]),["right"])),a[5]||(a[5]=e.withKeys(e.withModifiers((l=>!e.unref(p).vertical&&N(l,999)),["shift"]),["right"])),a[6]||(a[6]=e.withKeys(e.withModifiers((l=>e.unref(p).vertical&&N(l,1)),["exact"]),["down"])),a[7]||(a[7]=e.withKeys(e.withModifiers((l=>e.unref(p).vertical&&N(l,999)),["shift"]),["down"])),a[8]||(a[8]=e.withKeys((e=>N(e,-999)),["page-up"])),a[9]||(a[9]=e.withKeys((e=>N(e,999)),["page-down"])),a[10]||(a[10]=e.withKeys((e=>N(e,-999)),["home"])),a[11]||(a[11]=e.withKeys((e=>N(e,999)),["end"]))],onClick:e.withModifiers((e=>((e,l)=>{var a,t,i;x(l),l>=0&&!B.value[l].disabled&&(null==(a=B.value[l])?void 0:a.onClick)&&"function"==typeof B.value[l].onClick&&"function"==typeof B.value[l].onClick()&&(null==(i=(t=B.value[l]).onClick)||i.call(t)(e))})(e,t)),["stop","prevent"])}),[l.titleComponent?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.titleComponent),{key:0})):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(l.title),1)],64))],16,v)],2)})),128)),e.renderSlot(l.$slots,"tabs-end")],10,r)],2),e.unref(p).end?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(h).reuse,{key:1}))])),_:3},8,["id","class"]))}});exports._sfc_main=d,exports._sfc_main$1=c;
//# sourceMappingURL=BTabs.vue_vue_type_script_setup_true_lang-BLVtT4lI.js.map
